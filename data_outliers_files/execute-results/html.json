{
  "hash": "803a3668fb0f3499796a43952df8ccbd",
  "result": {
    "markdown": "---\ntitle: \"Data Outliers\"\nformat: html\n---\n\n::: {.cell}\n\n:::\n\n::: {#fig-lfeature .cell layout-ncol=\"2\"}\n\n```{.r .cell-code}\noverdue30to89 |> features(Value, feature_set(tags = \"lumpiness\")) |> \n                    plot_feature_violin(\"var_tiled_var\")\n\n\noverdue30to89 |> features(Value, feature_set(tags = \"stability\")) |> \n                     plot_feature_violin(\"var_tiled_mean\")\n\ntrend_features <- overdue30to89 |> \n                    features(Value, feature_set(tags = \"seasonal\")) \n\ntrend_features |>\n    plot_feature_violin(\"seasonal_strength_year\")\n\ntrend_features |>\n    plot_feature_violin(\"trend_strength\")\n\ntrend_features |>\n    plot_feature_violin(\"linearity\")\n\ntrend_features |>    \n    plot_feature_violin(\"stl_e_acf1\")\n\ntrend_features |>\n    plot_feature_violin(\"nsdiffs\")\n```\n\n::: {.cell-output-display}\n![Lumpiness - variance of the variances based on tiled (non-overlapping) windows](data_outliers_files/figure-html/fig-lfeature-1.png){#fig-lfeature-1 width=672}\n:::\n\n::: {.cell-output-display}\n![Stability - the variance of the means based on tiled (non-overlapping) windows](data_outliers_files/figure-html/fig-lfeature-2.png){#fig-lfeature-2 width=672}\n:::\n\n::: {.cell-output-display}\n![Seasonal Strength - For non-seasonal time series seasonal strength is 0](data_outliers_files/figure-html/fig-lfeature-3.png){#fig-lfeature-3 width=672}\n:::\n\n::: {.cell-output-display}\n![Trend Strength - 0 is week, 1 is strong](data_outliers_files/figure-html/fig-lfeature-4.png){#fig-lfeature-4 width=672}\n:::\n\n::: {.cell-output-display}\n![Linearity - large values when the series is nonlinear, and values around 0 when the series is linear](data_outliers_files/figure-html/fig-lfeature-5.png){#fig-lfeature-5 width=672}\n:::\n\n::: {.cell-output-display}\n![Autocorrelation - first autocorrelation coefficient. Coefficient close to 0 indicates weak or no linear relationship between lagged values. Negative values indicate tendency for a short-term reversal.](data_outliers_files/figure-html/fig-lfeature-6.png){#fig-lfeature-6 width=672}\n:::\n\n::: {.cell-output-display}\n![Minimum number of differences necessary to obtain a stationary time series](data_outliers_files/figure-html/fig-lfeature-7.png){#fig-lfeature-7 width=672}\n:::\n\nExploring Statistical Features\n:::\n\nhttps://cran.r-project.org/web/packages/tsfeatures/vignettes/tsfeatures.html\n\n\n\n\n\n\noutlier_banks <- post_features |>\n        group_by(BankType) |>\n        filter(!!as.name(feature_name) %in% range(!!as.name(feature_name))) |> distinct(BankName)\n\noutlier_banks$BankName\n\npost_features %>%\n  right_join(extreme_seasonalities) %>%\n  ggplot(aes(x = Quarter, y = Value)) +\n  geom_line() +\n  facet_grid(vars(BankName, scales::percent(seasonal_strength_year)),\n             scales = \"free_y\")\n\n\npcs |>\n  ggplot(aes(x = .fittedPC1, y = .fittedPC2, col = BankName)) +\n  geom_point() +\n  theme(aspect.ratio = 1) +\n  labs(title = \"US Credit Cards 30-89 days\",\n       subtitle = \"Principal components\",\n       x = \"PC1\",\n       y = \"PC2\")+ theme(legend.position=\"none\")\n\noutlier_firms <- pcs |>\n  filter( (.fittedPC2 > 2) | (.fittedPC1 < -7)) |>\n  select(BankName,  .fittedPC1, .fittedPC2)\n\noverdue30to89_post %>% \n\n",
    "supporting": [
      "data_outliers_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}