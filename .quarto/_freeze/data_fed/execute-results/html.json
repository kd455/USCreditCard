{
  "hash": "af5db215373c81b55d4ef8a5e4ec8171",
  "result": {
    "markdown": "---\ntitle: \"US Economic Data\"\nformat: \n   html:\n     df-print: paged\n---\n\n\nUS Federal Reserve Economic Data [@fred]\n\nYearly/Quarterly/Monthly data series covering various categories. For this project we are interested in data series that tell us about the financial health of households:\nEmployment rate\nPersonal Savings Rate\nDisposable Income\n\n@taghiyeh2021\n\n\n\n::: {.cell}\n\n:::\n\n## Granger Test\n\nChecks that the lagged values of X jointly improve the forecast of Y\n\nWhen choosing lags, note that there is a trade-off between bias and power. With too few lags the test may be biased because of residual auto-correlation. Too many, and you risk spurious rejections of the null because of random correlations\n\n\n\n::: {#tbl-granger-median .cell layout-ncol=\"1\" tbl-cap='Granger Test at Lags 1 to 4' tbl-subcap='[\"Large Bank and Large Credit Card Bank\",\"Large Bank\",\"Large Credit Card Bank\"]'}\n\n```{.r .cell-code}\ngranger_test_permutations(data = overdue30to89 |> left_join (us_measures_qtr,by = join_by(Quarter)), \n                            target_col_name = \"target_median\",\n                            exog_names = names(us_measures_qtr),\n                            max_lag = 4) |> list_rbind() |> left_join(us_economy.labels(), join_by(exog_variable==Name)) |> select(-c(Formula, Category))  \n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Df\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"F\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Pr(>F)\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"exog_variable\"],\"name\":[4],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Desc\"],\"name\":[5],\"type\":[\"chr\"],\"align\":[\"left\"]}],\"data\":[{\"1\":\"-1\",\"2\":\"7.689\",\"3\":\"0.007\",\"4\":\"RRSFS.Pop\",\"5\":\"Real Advance Retail and Food Services Sales per capita\"},{\"1\":\"-1\",\"2\":\"7.326\",\"3\":\"0.008\",\"4\":\"UNRATE\",\"5\":\"Unemployment Rate\"},{\"1\":\"-1\",\"2\":\"6.216\",\"3\":\"0.015\",\"4\":\"PCEDG.Pop.CPI\",\"5\":\"Real Personal Consumption Expenditures: Durable Goods per capita\"},{\"1\":\"-1\",\"2\":\"5.546\",\"3\":\"0.021\",\"4\":\"PCE.Pop.CPI\",\"5\":\"Real Personal Consumption Expenditures per capita\"},{\"1\":\"-1\",\"2\":\"5.119\",\"3\":\"0.026\",\"4\":\"B069RC1.Pop.CPI\",\"5\":\"Real Personal interest payments per capita\"},{\"1\":\"-2\",\"2\":\"5.733\",\"3\":\"0.005\",\"4\":\"RRSFS.Pop\",\"5\":\"Real Advance Retail and Food Services Sales per capita\"},{\"1\":\"-2\",\"2\":\"4.172\",\"3\":\"0.019\",\"4\":\"PCEDG.Pop.CPI\",\"5\":\"Real Personal Consumption Expenditures: Durable Goods per capita\"},{\"1\":\"-2\",\"2\":\"3.685\",\"3\":\"0.030\",\"4\":\"UNRATE\",\"5\":\"Unemployment Rate\"},{\"1\":\"-3\",\"2\":\"3.707\",\"3\":\"0.015\",\"4\":\"RRSFS.Pop\",\"5\":\"Real Advance Retail and Food Services Sales per capita\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\ngranger_test_permutations(data = overdue30to89.lbank |> left_join (us_measures_qtr,by = join_by(Quarter)), \n                            target_col_name = \"target_median\",\n                            exog_names = names(us_measures_qtr),\n                            max_lag = 4) |> list_rbind() |> left_join(us_economy.labels(), join_by(exog_variable==Name)) |> select(-c(Formula, Category))  \n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Df\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"F\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Pr(>F)\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"exog_variable\"],\"name\":[4],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Desc\"],\"name\":[5],\"type\":[\"chr\"],\"align\":[\"left\"]}],\"data\":[{\"1\":\"-1\",\"2\":\"9.495\",\"3\":\"0.003\",\"4\":\"RRSFS.Pop\",\"5\":\"Real Advance Retail and Food Services Sales per capita\"},{\"1\":\"-1\",\"2\":\"7.764\",\"3\":\"0.007\",\"4\":\"UNRATE\",\"5\":\"Unemployment Rate\"},{\"1\":\"-1\",\"2\":\"7.382\",\"3\":\"0.008\",\"4\":\"PCEDG.Pop.CPI\",\"5\":\"Real Personal Consumption Expenditures: Durable Goods per capita\"},{\"1\":\"-1\",\"2\":\"6.674\",\"3\":\"0.012\",\"4\":\"PCE.Pop.CPI\",\"5\":\"Real Personal Consumption Expenditures per capita\"},{\"1\":\"-1\",\"2\":\"5.586\",\"3\":\"0.021\",\"4\":\"B069RC1.Pop.CPI\",\"5\":\"Real Personal interest payments per capita\"},{\"1\":\"-2\",\"2\":\"7.416\",\"3\":\"0.001\",\"4\":\"RRSFS.Pop\",\"5\":\"Real Advance Retail and Food Services Sales per capita\"},{\"1\":\"-2\",\"2\":\"5.998\",\"3\":\"0.004\",\"4\":\"PCEDG.Pop.CPI\",\"5\":\"Real Personal Consumption Expenditures: Durable Goods per capita\"},{\"1\":\"-2\",\"2\":\"3.978\",\"3\":\"0.023\",\"4\":\"UNRATE\",\"5\":\"Unemployment Rate\"},{\"1\":\"-2\",\"2\":\"3.912\",\"3\":\"0.024\",\"4\":\"PCE.Pop.CPI\",\"5\":\"Real Personal Consumption Expenditures per capita\"},{\"1\":\"-3\",\"2\":\"4.711\",\"3\":\"0.005\",\"4\":\"RRSFS.Pop\",\"5\":\"Real Advance Retail and Food Services Sales per capita\"},{\"1\":\"-3\",\"2\":\"3.859\",\"3\":\"0.013\",\"4\":\"PCEDG.Pop.CPI\",\"5\":\"Real Personal Consumption Expenditures: Durable Goods per capita\"},{\"1\":\"-3\",\"2\":\"2.799\",\"3\":\"0.046\",\"4\":\"UNRATE\",\"5\":\"Unemployment Rate\"},{\"1\":\"-4\",\"2\":\"3.435\",\"3\":\"0.013\",\"4\":\"RRSFS.Pop\",\"5\":\"Real Advance Retail and Food Services Sales per capita\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\ngranger_test_permutations(data = overdue30to89.lcbank |> left_join (us_measures_qtr,by = join_by(Quarter)), \n                            target_col_name = \"target_median\",\n                            exog_names = names(us_measures_qtr),\n                            max_lag = 4) |> list_rbind() |> left_join(us_economy.labels(), join_by(exog_variable==Name)) |> select(-c(Formula, Category)) \n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Df\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"F\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Pr(>F)\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"exog_variable\"],\"name\":[4],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Desc\"],\"name\":[5],\"type\":[\"chr\"],\"align\":[\"left\"]}],\"data\":[{\"1\":\"-1\",\"2\":\"10.325\",\"3\":\"0.002\",\"4\":\"RRSFS.Pop\",\"5\":\"Real Advance Retail and Food Services Sales per capita\"},{\"1\":\"-1\",\"2\":\"7.613\",\"3\":\"0.007\",\"4\":\"PCE.Pop.CPI\",\"5\":\"Real Personal Consumption Expenditures per capita\"},{\"1\":\"-1\",\"2\":\"6.638\",\"3\":\"0.012\",\"4\":\"UNRATE\",\"5\":\"Unemployment Rate\"},{\"1\":\"-1\",\"2\":\"6.623\",\"3\":\"0.012\",\"4\":\"PCEDG.Pop.CPI\",\"5\":\"Real Personal Consumption Expenditures: Durable Goods per capita\"},{\"1\":\"-2\",\"2\":\"5.470\",\"3\":\"0.006\",\"4\":\"RRSFS.Pop\",\"5\":\"Real Advance Retail and Food Services Sales per capita\"},{\"1\":\"-2\",\"2\":\"4.144\",\"3\":\"0.020\",\"4\":\"PCE.Pop.CPI\",\"5\":\"Real Personal Consumption Expenditures per capita\"},{\"1\":\"-2\",\"2\":\"3.629\",\"3\":\"0.031\",\"4\":\"UNRATE\",\"5\":\"Unemployment Rate\"},{\"1\":\"-2\",\"2\":\"3.602\",\"3\":\"0.032\",\"4\":\"PCEDG.Pop.CPI\",\"5\":\"Real Personal Consumption Expenditures: Durable Goods per capita\"},{\"1\":\"-3\",\"2\":\"4.185\",\"3\":\"0.009\",\"4\":\"RRSFS.Pop\",\"5\":\"Real Advance Retail and Food Services Sales per capita\"},{\"1\":\"-3\",\"2\":\"3.135\",\"3\":\"0.031\",\"4\":\"UNRATE\",\"5\":\"Unemployment Rate\"},{\"1\":\"-3\",\"2\":\"3.071\",\"3\":\"0.033\",\"4\":\"PCE.Pop.CPI\",\"5\":\"Real Personal Consumption Expenditures per capita\"},{\"1\":\"-4\",\"2\":\"3.246\",\"3\":\"0.017\",\"4\":\"RRSFS.Pop\",\"5\":\"Real Advance Retail and Food Services Sales per capita\"},{\"1\":\"-4\",\"2\":\"2.888\",\"3\":\"0.029\",\"4\":\"PCE.Pop.CPI\",\"5\":\"Real Personal Consumption Expenditures per capita\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n## CCF \n\n::: {.cell}\n\n```{.r .cell-code}\nrun_ccf_test(data = overdue30to89.lcbank |> left_join (us_measures_qtr,by = join_by(Quarter)),\n             target_variable = \"target_median\",\n             exog_variable = \"RRSFS.Pop\",\n             do_difference = TRUE)\n\nrun_ccf_test(data = overdue30to89.lcbank |> left_join (us_measures_qtr,by = join_by(Quarter)),\n             target_variable = \"target_median\",\n             exog_variable = \"A229RC0.CPI\",\n             do_difference = TRUE)             \n#us_measures_qtr |> names() |> purrr::map(\\(x) run_ccf_test(overdue30to89 |> left_join (us_measures_qtr,by = join_by(Quarter)), \"target_mean\", x, 4))\n```\n\n::: {.cell-output-display}\n![](data_fed_files/figure-html/fig-ccf-1.png){#fig-ccf-1 width=672}\n:::\n\n::: {.cell-output-display}\n![](data_fed_files/figure-html/fig-ccf-2.png){#fig-ccf-2 width=672}\n:::\n:::\n\n\n## US Economic Measures\n\n::: {#fig-usmeasures .panel-tabset}\n\n## Combined\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_us_category(\"Expenditures\",us_measures_qtr, overdue30to89)\n```\n\n::: {.cell-output-display}\n![](data_fed_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n\n```{.r .cell-code}\nplot_us_category(\"Income & Savings\",us_measures_qtr, overdue30to89)\n```\n\n::: {.cell-output-display}\n![](data_fed_files/figure-html/unnamed-chunk-4-2.png){width=672}\n:::\n\n```{.r .cell-code}\nplot_us_category(\"Other\",us_measures_qtr, overdue30to89)\n```\n\n::: {.cell-output-display}\n![](data_fed_files/figure-html/unnamed-chunk-4-3.png){width=672}\n:::\n:::\n\n\n\n\n## Large Bank\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_us_category(\"Expenditures\", us_measures_qtr, overdue30to89.lbank)\n```\n\n::: {.cell-output-display}\n![](data_fed_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n\n```{.r .cell-code}\nplot_us_category(\"Income & Savings\", us_measures_qtr, overdue30to89.lbank)\n```\n\n::: {.cell-output-display}\n![](data_fed_files/figure-html/unnamed-chunk-5-2.png){width=672}\n:::\n\n```{.r .cell-code}\nplot_us_category(\"Other\", us_measures_qtr, overdue30to89.lbank)\n```\n\n::: {.cell-output-display}\n![](data_fed_files/figure-html/unnamed-chunk-5-3.png){width=672}\n:::\n:::\n\n\n## Large Credit Card Bank\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_us_category(\"Expenditures\", us_measures_qtr, overdue30to89.lcbank)\n```\n\n::: {.cell-output-display}\n![](data_fed_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n\n```{.r .cell-code}\nplot_us_category(\"Income & Savings\", us_measures_qtr, overdue30to89.lcbank)\n```\n\n::: {.cell-output-display}\n![](data_fed_files/figure-html/unnamed-chunk-6-2.png){width=672}\n:::\n\n```{.r .cell-code}\nplot_us_category(\"Other\", us_measures_qtr, overdue30to89.lcbank)\n```\n\n::: {.cell-output-display}\n![](data_fed_files/figure-html/unnamed-chunk-6-3.png){width=672}\n:::\n:::\n\n:::\n",
    "supporting": [
      "data_fed_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}