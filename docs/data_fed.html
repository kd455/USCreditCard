<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>US Credit Card Partnerships - 4&nbsp; Explanatory Data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./model_event.html" rel="next">
<link href="./data_partners.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./data_ffiec.html">Data</a></li><li class="breadcrumb-item"><a href="./data_fed.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Explanatory Data</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">US Credit Card Partnerships</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Data</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data_ffiec.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Bank Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data_partners.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Bank Partnerships</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data_fed.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Explanatory Data</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Event Study</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./model_event.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Event Studies</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./model_market.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Market Model</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./model_arima.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Linear Regression with AR Errors</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./model_hierarchy_event.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Hierarchical Model</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./model_ml.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">XGBoost Model</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./model_event_summary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Overall Results</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Appendix</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data_banks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Bank Peer Groups</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data_final_event.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Event Study Dataset</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#us-economic-data" id="toc-us-economic-data" class="nav-link active" data-scroll-target="#us-economic-data"><span class="header-section-number">4.1</span> US Economic Data</a>
  <ul class="collapse">
  <li><a href="#statistical-tests" id="toc-statistical-tests" class="nav-link" data-scroll-target="#statistical-tests"><span class="header-section-number">4.1.1</span> Statistical tests</a></li>
  </ul></li>
  <li><a href="#portfolio-data" id="toc-portfolio-data" class="nav-link" data-scroll-target="#portfolio-data"><span class="header-section-number">4.2</span> Portfolio Data</a>
  <ul class="collapse">
  <li><a href="#statistical-tests-1" id="toc-statistical-tests-1" class="nav-link" data-scroll-target="#statistical-tests-1"><span class="header-section-number">4.2.1</span> Statistical tests</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Explanatory Data</span></h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="us-economic-data" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="us-economic-data"><span class="header-section-number">4.1</span> US Economic Data</h2>
<p>As discussed in <a href="data_partners.html#sec-trend-event"><span>Section&nbsp;3.2</span></a> the impact of the partnership event can be masked by trends and seasonality.</p>
<p>The simplest model approach we look at is the Market model, see <a href="model_market.html#sec-model-market"><span>Section&nbsp;6.1</span></a>, which involves adjusting each Bank’s <em>Credit Card Plans-30-89 DAYS P/D %</em> by removing the influence of the broader trend within its respective group (Large Banks or Large Credit Card Banks). We assume the residuals are due to the unique characteristics of each Bank’s credit card portfolio. These characteristics might include the bank’s specific credit policies, customer risk profiles, or portfolio management strategies.</p>
<p>This approach assumes that the broader “market” trend takes into account, to some extent, the impact of macroeconomic variables. However, we may want to include macroeconomic variables to improve the model’s ability to explain credit card delinquencies that are not captured by the group trend alone.</p>
<p>US Federal Reserve Economic Data <span class="citation" data-cites="fred">(<a href="references.html#ref-fred" role="doc-biblioref">2023</a>)</span> provides macroeconomic data series; we can use published literature and new analysis to inform our choice of variables.</p>
<p>The figures below plot data series related to consumer financial behaviour before and after the 2008 financial crisis and the enactment of the Credit Card Accountability Responsibility and Disclosure (CARD) Act in 2010 (see <a href="data_ffiec.html#sec-cardact"><span>Section&nbsp;2.3</span></a>). We can see that the onset of the COVID-19 pandemic marks a distinct phase of economic upheaval.</p>
<p>Each variable has been adjusted for population changes and inflation to ensure we can compare across different time periods.</p>
<p><span class="citation" data-cites="GHJ2001">Grieb, Hegji, and Jones (<a href="references.html#ref-GHJ2001" role="doc-biblioref">2001</a>)</span>, over the period 1981 to 1999, found that delinquency is positively correlated with the <em>consumer debt service ratio</em>, which is the ability for borrowers to service their consumer loans relative to disposable income. Consumer loans include credit cards, other revolving credit and term loans. In the decade that ensued post 2008 crisis, there is a noticeable trend of increasing personal expenditures and although personal incomes also increase, their rate of increase does not match that of expenditures. This divergence results in a gradual rise in the consumer debt service ratio (CDSP), indicating an expanding gap between income and debt obligations. Notably, this isn’t reflected in credit card delinquency rates which remain relatively stable suggesting consumer debt is no longer a strong determinant of delinquency by itself. The broader measure, household debt (TDSP), which is consumer debt plus mortgage loans, may be a more informative of measure of a household’s overall financial health. We can see in <a href="#fig-econ-cat-comb-3">Figure&nbsp;<span>4.3</span></a> that household debt was decreasing while consumer debt increased.</p>
<p><span class="citation" data-cites="Agarwal2003">Liu and Agarwal (<a href="references.html#ref-Agarwal2003" role="doc-biblioref">2003</a>)</span>, using proprietary credit card data of 700 thousand customers from 1995 to 2001, concluded that <em>unemployment</em> is a key determinant of consumer delinquency and bankruptcy. However, <span class="citation" data-cites="taghiyeh2021">Taghiyeh, Lengacher, and Handfield (<a href="references.html#ref-taghiyeh2021" role="doc-biblioref">2021</a>)</span> in their 2021 study concluded that unemployment is no longer sufficient. This can be seen in <a href="#fig-econ-cat-comb-4">Figure&nbsp;<span>4.4</span></a> where post 2008 financial crisis delinquency decreased as unemployment decreased but has since remained relatively stable as unemployment as decreased further. <span class="citation" data-cites="taghiyeh2021">Taghiyeh, Lengacher, and Handfield (<a href="references.html#ref-taghiyeh2021" role="doc-biblioref">2021</a>)</span> found the most significant variables to predict credit card loss was: previous quarter <em>Unemployment</em>, <em>Building permits</em> and <em>Initial unemployment insurance claims</em>; previous year’s (lag 4) <em>Money stock</em> and <em>ISM Purchasing Mangers Index</em> and the current quarter’s <em>Weekly hours worked by manufacturing workers</em>.</p>
<div class="tabset-margin-container"></div><div id="fig-usmeasures" class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" aria-current="page">Combined</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Large Bank</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">Large Credit Card Bank</a></li></ul>
<div id="fig-usmeasures" class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_us_category</span>(<span class="st">"Expenditures"</span>,us_measures_qtr, overdue30to89.all, <span class="st">"value.all.median"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_us_category</span>(<span class="st">"Income &amp; Savings"</span>,us_measures_qtr, overdue30to89.all, <span class="st">"value.all.median"</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_us_category</span>(<span class="st">"Debt"</span>,us_measures_qtr, overdue30to89.all, <span class="st">"value.all.median"</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_us_category</span>(<span class="st">"Economy"</span>,us_measures_qtr, overdue30to89.all, <span class="st">"value.all.median"</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># measures = us_measures_qtr</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># target_data = overdue30to89.all </span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># target_measure = "value.all.median"</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># target_label &lt;-credit_card.target_label()</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># index_var &lt;- index_var(measures)</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># recessions &lt;- us_economy.recession() |&gt; </span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="co">#                 filter(Flag == 1, </span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">#                        Month &gt;= ym("1989-10"))</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># data &lt;- measures |&gt; drop_na() |&gt;</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>    <span class="co">#           mutate(across(!as.name(index_var), scale))</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># max_y &lt;- max_tstibble(data)     </span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># data |&gt;        </span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>    <span class="co">#     pivot_longer(cols = !Quarter) |&gt;</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>    <span class="co">#     left_join(us_economy.labels(), by = join_by(name==Name)) |&gt;</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>    <span class="co">#     filter(name %in% c("UNRATE", "TDSP","CDSP")) |&gt;</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>    <span class="co">#     mutate(comb_label = paste(name, "-", Desc, "(", Formula, ")")) |&gt;</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>    <span class="co">#     ggplot(aes(x = Quarter, y = value, colour = comb_label)) + </span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>    <span class="co">#     geom_line() +theme_bw() +</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>    <span class="co">#     theme(legend.direction = "vertical",legend.position = "top", legend.title=element_blank(),</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>    <span class="co">#           plot.title = element_markdown(size = 12),</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>    <span class="co">#           plot.subtitle = element_text(size = 9)) +</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>    <span class="co">#     labs(y = "Normalised (Normal=0)",</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>    <span class="co">#         title = glue("Macroeconomic measures against median &lt;span style='color:darkred'&gt;**{target_label}**&lt;/span&gt;"),</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>    <span class="co">#         subtitle = "Recessions shown in boxed area") +     </span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>    <span class="co">#     geom_rect(data = recessions,inherit.aes = FALSE, </span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>    <span class="co">#               aes(xmin = Month, xmax = Month + 30, ymin = -Inf, ymax = Inf), fill = "lightgrey", alpha = 0.5) +</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>    <span class="co">#     geom_line(mapping = aes(y = !!as.name(target_measure)), data = target_data,</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>    <span class="co">#               colour = 'darkred') +</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>    <span class="co">#     geom_vline(xintercept = as.numeric(yq(get_regulation_cutoff())), linetype=3,colour="darkred") +</span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>    <span class="co">#     annotate("text", x=as.numeric(yq(get_regulation_cutoff())), y=max_y-1, size = 9/.pt, label="Credit Card Regulations",vjust = 0.5, hjust = -0.15, colour = "black") +</span></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>    <span class="co">#     scale_colour_colorblind7()          </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-econ-cat-comb-1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_fed_files/figure-html/fig-econ-cat-comb-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;4.1: Expenditure Measures</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display">
<div id="fig-econ-cat-comb-2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_fed_files/figure-html/fig-econ-cat-comb-2.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;4.2: Income &amp; Savings Measures</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display">
<div id="fig-econ-cat-comb-3" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_fed_files/figure-html/fig-econ-cat-comb-3.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;4.3: Debt Measures</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display">
<div id="fig-econ-cat-comb-4" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_fed_files/figure-html/fig-econ-cat-comb-4.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;4.4: Unemployment and Confidence Measures</figcaption>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_us_category</span>(<span class="st">"Expenditures"</span>, us_measures_qtr, overdue30to89.all.lbank, <span class="st">"value.group.median"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_us_category</span>(<span class="st">"Income &amp; Savings"</span>, us_measures_qtr, overdue30to89.all.lbank, <span class="st">"value.group.median"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_us_category</span>(<span class="st">"Debt"</span>, us_measures_qtr, overdue30to89.all.lbank, <span class="st">"value.group.median"</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_us_category</span>(<span class="st">"Economy"</span>, us_measures_qtr, overdue30to89.all.lbank, <span class="st">"value.group.median"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-econ-cat-lc-1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_fed_files/figure-html/fig-econ-cat-lc-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;4.5: Expenditure Measures</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display">
<div id="fig-econ-cat-lc-2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_fed_files/figure-html/fig-econ-cat-lc-2.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;4.6: Income &amp; Savings Measures</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display">
<div id="fig-econ-cat-lc-3" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_fed_files/figure-html/fig-econ-cat-lc-3.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;4.7: Debt Measures</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display">
<div id="fig-econ-cat-lc-4" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_fed_files/figure-html/fig-econ-cat-lc-4.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;4.8: Unemployment and Confidence Measures</figcaption>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_us_category</span>(<span class="st">"Expenditures"</span>, us_measures_qtr, overdue30to89.all.lcbank, <span class="st">"value.group.median"</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_us_category</span>(<span class="st">"Income &amp; Savings"</span>, us_measures_qtr, overdue30to89.all.lcbank, <span class="st">"value.group.median"</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_us_category</span>(<span class="st">"Debt"</span>, us_measures_qtr, overdue30to89.all.lcbank, <span class="st">"value.group.median"</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_us_category</span>(<span class="st">"Economy"</span>, us_measures_qtr, overdue30to89.all.lcbank, <span class="st">"value.group.median"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-econ-cat-lcc-1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_fed_files/figure-html/fig-econ-cat-lcc-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;4.9: Expenditure Measures</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display">
<div id="fig-econ-cat-lcc-2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_fed_files/figure-html/fig-econ-cat-lcc-2.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;4.10: Income &amp; Savings Measures</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display">
<div id="fig-econ-cat-lcc-3" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_fed_files/figure-html/fig-econ-cat-lcc-3.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;4.11: Debt Measures</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display">
<div id="fig-econ-cat-lcc-4" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_fed_files/figure-html/fig-econ-cat-lcc-4.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;4.12: Unemployment and Confidence Measures</figcaption>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<section id="statistical-tests" class="level3" data-number="4.1.1">
<h3 data-number="4.1.1" class="anchored" data-anchor-id="statistical-tests"><span class="header-section-number">4.1.1</span> Statistical tests</h3>
<p>In time series analysis we can use tests like Cross-Correlation Function (CCF) and Granger Test to understand relationships between variables.</p>
<section id="granger-test" class="level4" data-number="4.1.1.1">
<h4 data-number="4.1.1.1" class="anchored" data-anchor-id="granger-test"><span class="header-section-number">4.1.1.1</span> Granger Test</h4>
<p>Intuitively, changes in the macroeconomic environment will take time to impact credit card delinquency. We can test for significance of different lags using the Granger test for each variable.</p>
<p>“X is said to Granger-cause Y if Y can be better predicted using the histories of both X and Y than it can by using the history of Y alone.”<span class="citation" data-cites="granger2011">(<a href="references.html#ref-granger2011" role="doc-biblioref">Giles 2011</a>)</span></p>
<p>The tables presented below, show the macroeconomic variable and lag (Df column) that Granger-cause <em>Credit Card Plans-30-89 DAYS P/D %</em> (Y).</p>
<div class="tabset-margin-container"></div><div id="fig-granger" class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">Combined</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Large Bank</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" role="tab" aria-controls="tabset-2-3" aria-selected="false">Large Credit Card Bank</a></li></ul>
<div id="fig-granger" class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">granger_test_permutations</span>(<span class="at">data =</span> overdue30to89.post <span class="sc">|&gt;</span> <span class="fu">left_join</span> (us_measures_qtr,<span class="at">by =</span> <span class="fu">join_by</span>(Quarter)), </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>                            <span class="at">target_col_name =</span> <span class="st">"value.all.median"</span>,</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>                            <span class="at">exog_names =</span> <span class="fu">names</span>(us_measures_qtr),</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>                            <span class="at">max_lag =</span> <span class="dv">4</span>) <span class="sc">|&gt;</span> <span class="fu">list_rbind</span>() <span class="sc">|&gt;</span> <span class="fu">left_join</span>(<span class="fu">us_economy.labels</span>(), <span class="fu">join_by</span>(exog_variable<span class="sc">==</span>Name)) <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(Formula, Category)) <span class="sc">|&gt;</span> rmarkdown<span class="sc">::</span><span class="fu">paged_table</span>()</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="fu">granger_test_permutations</span>(<span class="at">data =</span> overdue30to89.post <span class="sc">|&gt;</span> <span class="fu">filter_index</span>(<span class="sc">~</span> <span class="st">"2020"</span>) <span class="sc">|&gt;</span> <span class="fu">left_join</span> (us_measures_qtr,<span class="at">by =</span> <span class="fu">join_by</span>(Quarter)), </span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>                            <span class="at">target_col_name =</span> <span class="st">"value.all.median"</span>,</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>                            <span class="at">exog_names =</span> <span class="fu">names</span>(us_measures_qtr),</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>                            <span class="at">max_lag =</span> <span class="dv">4</span>) <span class="sc">|&gt;</span> <span class="fu">list_rbind</span>() <span class="sc">|&gt;</span> <span class="fu">left_join</span>(<span class="fu">us_economy.labels</span>(), <span class="fu">join_by</span>(exog_variable<span class="sc">==</span>Name)) <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(Formula, Category)) <span class="sc">|&gt;</span> rmarkdown<span class="sc">::</span><span class="fu">paged_table</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="tbl-granger-comb" class="cell tbl-parent quarto-layout-panel anchored">
<div class="panel-caption table-caption">
<p>Table&nbsp;4.1: Granger Test at Lags 1 to 4</p>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div id="tbl-granger-comb-1" class="quarto-layout-cell quarto-layout-cell-subref anchored" data-ref-parent="tbl-granger-comb" style="flex-basis: 100.0%;justify-content: center;">
<div id="tbl-granger-comb-1" data-ref-parent="tbl-granger-comb" class="anchored">

<div data-pagedtable="false"> <div class="table-caption">(a) <p>Post regulatory period</p> </div>
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Df"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["F"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["Pr(>F)"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["exog_variable"],"name":[4],"type":["chr"],"align":["left"]},{"label":["Desc"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"-3","2":"3.296","3":"0.03","4":"RRSFS.Pop","5":"Real Advance Retail and Food Services Sales per capita"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<p><strong>?(caption)</strong></p>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div id="tbl-granger-comb-2" class="quarto-layout-cell quarto-layout-cell-subref anchored" data-ref-parent="tbl-granger-comb" style="flex-basis: 100.0%;justify-content: center;">
<div id="tbl-granger-comb-2" data-ref-parent="tbl-granger-comb" class="anchored">

<div data-pagedtable="false"> <div class="table-caption">(b) <p>Pre-pandemic post regulatory period</p> </div>
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Df"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["F"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["Pr(>F)"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["exog_variable"],"name":[4],"type":["chr"],"align":["left"]},{"label":["Desc"],"name":[5],"type":["chr"],"align":["left"]}],"data":[],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<p><strong>?(caption)</strong></p>
</div>
</div>
</div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">granger_test_permutations</span>(<span class="at">data =</span> overdue30to89.post.lbank <span class="sc">|&gt;</span> <span class="fu">left_join</span> (us_measures_qtr,<span class="at">by =</span> <span class="fu">join_by</span>(Quarter)), </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>                            <span class="at">target_col_name =</span> <span class="st">"value.group.median"</span>,</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>                            <span class="at">exog_names =</span> <span class="fu">names</span>(us_measures_qtr),</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>                            <span class="at">max_lag =</span> <span class="dv">4</span>) <span class="sc">|&gt;</span> <span class="fu">list_rbind</span>() <span class="sc">|&gt;</span> <span class="fu">left_join</span>(<span class="fu">us_economy.labels</span>(), <span class="fu">join_by</span>(exog_variable<span class="sc">==</span>Name)) <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(Formula, Category)) <span class="sc">|&gt;</span> rmarkdown<span class="sc">::</span><span class="fu">paged_table</span>()  </span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="fu">granger_test_permutations</span>(<span class="at">data =</span> overdue30to89.post.lbank <span class="sc">|&gt;</span> <span class="fu">filter_index</span>(<span class="sc">~</span> <span class="st">"2020"</span>) <span class="sc">|&gt;</span> <span class="fu">left_join</span> (us_measures_qtr,<span class="at">by =</span> <span class="fu">join_by</span>(Quarter)), </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>                            <span class="at">target_col_name =</span> <span class="st">"value.group.median"</span>,</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>                            <span class="at">exog_names =</span> <span class="fu">names</span>(us_measures_qtr),</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>                            <span class="at">max_lag =</span> <span class="dv">4</span>) <span class="sc">|&gt;</span> <span class="fu">list_rbind</span>() <span class="sc">|&gt;</span> <span class="fu">left_join</span>(<span class="fu">us_economy.labels</span>(), <span class="fu">join_by</span>(exog_variable<span class="sc">==</span>Name)) <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(Formula, Category)) <span class="sc">|&gt;</span> rmarkdown<span class="sc">::</span><span class="fu">paged_table</span>()  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="tbl-granger-lb" class="cell tbl-parent quarto-layout-panel anchored">
<div class="panel-caption table-caption">
<p>Table&nbsp;4.2: Granger Test at Lags 1 to 4</p>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div id="tbl-granger-lb-1" class="quarto-layout-cell quarto-layout-cell-subref anchored" data-ref-parent="tbl-granger-lb" style="flex-basis: 100.0%;justify-content: center;">
<div id="tbl-granger-lb-1" data-ref-parent="tbl-granger-lb" class="anchored">

<div data-pagedtable="false"> <div class="table-caption">(a) <p>Post regulatory period</p> </div>
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Df"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["F"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["Pr(>F)"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["exog_variable"],"name":[4],"type":["chr"],"align":["left"]},{"label":["Desc"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"-3","2":"3.484","3":"0.024","4":"RRSFS.Pop","5":"Real Advance Retail and Food Services Sales per capita"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<p><strong>?(caption)</strong></p>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div id="tbl-granger-lb-2" class="quarto-layout-cell quarto-layout-cell-subref anchored" data-ref-parent="tbl-granger-lb" style="flex-basis: 100.0%;justify-content: center;">
<div id="tbl-granger-lb-2" data-ref-parent="tbl-granger-lb" class="anchored">

<div data-pagedtable="false"> <div class="table-caption">(b) <p>Pre-pandemic post regulatory period</p> </div>
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Df"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["F"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["Pr(>F)"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["exog_variable"],"name":[4],"type":["chr"],"align":["left"]},{"label":["Desc"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"-3","2":"3.673","3":"0.023","4":"TDSP","5":"Household Debt Service Payments as a Percent of Disposable Personal Income"},{"1":"-4","2":"4.231","3":"0.009","4":"A229RC0.CPI","5":"Real Disposable Personal Income per capita"},{"1":"-4","2":"3.021","3":"0.036","4":"CDSP","5":"Consumer Debt Service Payments as a Percent of Disposable Personal Income"},{"1":"-4","2":"2.871","3":"0.043","4":"PSAVERT","5":"US Personal Savings Rate"},{"1":"-4","2":"2.870","3":"0.043","4":"TDSP","5":"Household Debt Service Payments as a Percent of Disposable Personal Income"},{"1":"-4","2":"2.840","3":"0.044","4":"PSAVE","5":"Quarterly Personal Saving"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<p><strong>?(caption)</strong></p>
</div>
</div>
</div>
</div>
</div>
<div id="tabset-2-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-3-tab">
<div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">granger_test_permutations</span>(<span class="at">data =</span> overdue30to89.post.lcbank <span class="sc">|&gt;</span> <span class="fu">left_join</span> (us_measures_qtr,<span class="at">by =</span> <span class="fu">join_by</span>(Quarter)), </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>                            <span class="at">target_col_name =</span> <span class="st">"value.group.median"</span>,</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>                            <span class="at">exog_names =</span> <span class="fu">names</span>(us_measures_qtr),</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>                            <span class="at">max_lag =</span> <span class="dv">4</span>) <span class="sc">|&gt;</span> <span class="fu">list_rbind</span>() <span class="sc">|&gt;</span> <span class="fu">left_join</span>(<span class="fu">us_economy.labels</span>(), <span class="fu">join_by</span>(exog_variable<span class="sc">==</span>Name)) <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(Formula, Category)) <span class="sc">|&gt;</span> rmarkdown<span class="sc">::</span><span class="fu">paged_table</span>()  </span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">granger_test_permutations</span>(<span class="at">data =</span> overdue30to89.post.lcbank <span class="sc">|&gt;</span> <span class="fu">filter_index</span>(<span class="sc">~</span> <span class="st">"2020"</span>) <span class="sc">|&gt;</span> <span class="fu">left_join</span> (us_measures_qtr,<span class="at">by =</span> <span class="fu">join_by</span>(Quarter)), </span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>                            <span class="at">target_col_name =</span> <span class="st">"value.group.median"</span>,</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>                            <span class="at">exog_names =</span> <span class="fu">names</span>(us_measures_qtr),</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>                            <span class="at">max_lag =</span> <span class="dv">4</span>) <span class="sc">|&gt;</span> <span class="fu">list_rbind</span>() <span class="sc">|&gt;</span> <span class="fu">left_join</span>(<span class="fu">us_economy.labels</span>(), <span class="fu">join_by</span>(exog_variable<span class="sc">==</span>Name)) <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(Formula, Category)) <span class="sc">|&gt;</span> rmarkdown<span class="sc">::</span><span class="fu">paged_table</span>()                              </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="tbl-granger-lcb" class="cell tbl-parent quarto-layout-panel anchored">
<div class="panel-caption table-caption">
<p>Table&nbsp;4.3: Granger Test at Lags 1 to 4</p>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div id="tbl-granger-lcb-1" class="quarto-layout-cell quarto-layout-cell-subref anchored" data-ref-parent="tbl-granger-lcb" style="flex-basis: 100.0%;justify-content: center;">
<div id="tbl-granger-lcb-1" data-ref-parent="tbl-granger-lcb" class="anchored">

<div data-pagedtable="false"> <div class="table-caption">(a) <p>Post regulatory period</p> </div>
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Df"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["F"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["Pr(>F)"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["exog_variable"],"name":[4],"type":["chr"],"align":["left"]},{"label":["Desc"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"-1","2":"5.436","3":"0.024","4":"RRSFS.Pop","5":"Real Advance Retail and Food Services Sales per capita"},{"1":"-1","2":"4.735","3":"0.035","4":"PCEDG.Pop.CPI","5":"Real Personal Consumption Expenditures: Durable Goods per capita"},{"1":"-3","2":"9.716","3":"0.000","4":"PCEDG.Pop.CPI","5":"Real Personal Consumption Expenditures: Durable Goods per capita"},{"1":"-3","2":"9.405","3":"0.000","4":"RRSFS.Pop","5":"Real Advance Retail and Food Services Sales per capita"},{"1":"-3","2":"3.216","3":"0.032","4":"PCE.Pop.CPI","5":"Real Personal Consumption Expenditures per capita"},{"1":"-4","2":"7.128","3":"0.000","4":"PCEDG.Pop.CPI","5":"Real Personal Consumption Expenditures: Durable Goods per capita"},{"1":"-4","2":"6.516","3":"0.000","4":"RRSFS.Pop","5":"Real Advance Retail and Food Services Sales per capita"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<p><strong>?(caption)</strong></p>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div id="tbl-granger-lcb-2" class="quarto-layout-cell quarto-layout-cell-subref anchored" data-ref-parent="tbl-granger-lcb" style="flex-basis: 100.0%;justify-content: center;">
<div id="tbl-granger-lcb-2" data-ref-parent="tbl-granger-lcb" class="anchored">

<div data-pagedtable="false"> <div class="table-caption">(b) <p>Pre-pandemic post regulatory period</p> </div>
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Df"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["F"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["Pr(>F)"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["exog_variable"],"name":[4],"type":["chr"],"align":["left"]},{"label":["Desc"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"-4","2":"3.186","3":"0.03","4":"CSCICP03USM665S","5":"US Composite Confidence Indicator"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<p><strong>?(caption)</strong></p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="cross-correlation-function" class="level4" data-number="4.1.1.2">
<h4 data-number="4.1.1.2" class="anchored" data-anchor-id="cross-correlation-function"><span class="header-section-number">4.1.1.2</span> Cross-Correlation Function</h4>
<p>The Cross-Correlation function measures the correlation between series X at time <span class="math inline">\(t+k\)</span> and series Y at time <span class="math inline">\(t\)</span>, for various lags <span class="math inline">\(k\)</span>. A positive <span class="math inline">\(k\)</span> indicates future values of X relative to Y, conversely, a negative <span class="math inline">\(k\)</span> indicates past values of X relative to Y.</p>
<p>Below tests various macroeconomic variables (X) against <em>Credit Card Plans-30-89 DAYS P/D %</em> (Y).</p>
<div class="tabset-margin-container"></div><div id="fig-ccf" class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true">Combined</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">Large Bank</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-3" role="tab" aria-controls="tabset-3-3" aria-selected="false">Large Credit Card Bank</a></li></ul>
<div id="fig-ccf" class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">run_ccf_test</span>(<span class="at">data =</span> overdue30to89.post <span class="sc">|&gt;</span> <span class="fu">left_join</span> (us_measures_qtr,<span class="at">by =</span> <span class="fu">join_by</span>(Quarter)),</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">target_variable =</span> <span class="st">"value.all.median"</span>,</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">exog_variable =</span> <span class="st">"RRSFS.Pop"</span>,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">do_difference =</span> <span class="cn">TRUE</span>)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="fu">run_ccf_test</span>(<span class="at">data =</span> overdue30to89.post <span class="sc">|&gt;</span> <span class="fu">left_join</span> (us_measures_qtr,<span class="at">by =</span> <span class="fu">join_by</span>(Quarter)),</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">target_variable =</span> <span class="st">"value.all.median"</span>,</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">exog_variable =</span> <span class="st">"CDSP"</span>,</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">do_difference =</span> <span class="cn">TRUE</span>)    </span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="fu">run_ccf_test</span>(<span class="at">data =</span> overdue30to89.post <span class="sc">|&gt;</span> <span class="fu">left_join</span> (us_measures_qtr,<span class="at">by =</span> <span class="fu">join_by</span>(Quarter)),</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>             <span class="at">target_variable =</span> <span class="st">"value.all.median"</span>,</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>             <span class="at">exog_variable =</span> <span class="st">"TDSP"</span>,</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>             <span class="at">do_difference =</span> <span class="cn">TRUE</span>)    </span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a><span class="fu">run_ccf_test</span>(<span class="at">data =</span> overdue30to89.post <span class="sc">|&gt;</span> <span class="fu">left_join</span> (us_measures_qtr,<span class="at">by =</span> <span class="fu">join_by</span>(Quarter)),</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>             <span class="at">target_variable =</span> <span class="st">"value.all.median"</span>,</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>             <span class="at">exog_variable =</span> <span class="st">"UNRATE"</span>,</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>             <span class="at">do_difference =</span> <span class="cn">TRUE</span>)                          </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-ccf" class="cell quarto-layout-panel">
<figure class="figure">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-ccf-1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_fed_files/figure-html/fig-ccf-1.png" class="img-fluid figure-img" data-ref-parent="fig-ccf" width="672"></p>
<figcaption class="figure-caption">(a) RRSFS.Pop - Real Advance Retail and Food Services Sales per capita</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-ccf-2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_fed_files/figure-html/fig-ccf-2.png" class="img-fluid figure-img" data-ref-parent="fig-ccf" width="672"></p>
<figcaption class="figure-caption">(b) CDSP - Consumer Debt Service Payments as a Percent of Disposable Personal Income</figcaption>
</figure>
</div>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-ccf-3" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_fed_files/figure-html/fig-ccf-3.png" class="img-fluid figure-img" data-ref-parent="fig-ccf" width="672"></p>
<figcaption class="figure-caption">(c) TDSP - Household Debt Service Payments as a Percent of Disposable Personal Income</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-ccf-4" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_fed_files/figure-html/fig-ccf-4.png" class="img-fluid figure-img" data-ref-parent="fig-ccf" width="672"></p>
<figcaption class="figure-caption">(d) UNRATE - Unemployment Rate</figcaption>
</figure>
</div>
</div>
</div>
<p></p><figcaption class="figure-caption">Figure&nbsp;4.13: Cross-Correlation Function</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">run_ccf_test</span>(<span class="at">data =</span> overdue30to89.post.lbank <span class="sc">|&gt;</span> <span class="fu">left_join</span> (us_measures_qtr,<span class="at">by =</span> <span class="fu">join_by</span>(Quarter)),</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">target_variable =</span> <span class="st">"value.group.median"</span>,</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">exog_variable =</span> <span class="st">"RRSFS.Pop"</span>,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">do_difference =</span> <span class="cn">TRUE</span>)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="fu">run_ccf_test</span>(<span class="at">data =</span> overdue30to89.post.lbank <span class="sc">|&gt;</span> <span class="fu">left_join</span> (us_measures_qtr,<span class="at">by =</span> <span class="fu">join_by</span>(Quarter)),</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">target_variable =</span> <span class="st">"value.group.median"</span>,</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">exog_variable =</span> <span class="st">"CDSP"</span>,</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">do_difference =</span> <span class="cn">TRUE</span>)    </span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="fu">run_ccf_test</span>(<span class="at">data =</span> overdue30to89.post.lbank <span class="sc">|&gt;</span> <span class="fu">left_join</span> (us_measures_qtr,<span class="at">by =</span> <span class="fu">join_by</span>(Quarter)),</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>             <span class="at">target_variable =</span> <span class="st">"value.group.median"</span>,</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>             <span class="at">exog_variable =</span> <span class="st">"TDSP"</span>,</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>             <span class="at">do_difference =</span> <span class="cn">TRUE</span>)                 </span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a><span class="fu">run_ccf_test</span>(<span class="at">data =</span> overdue30to89.post.lbank <span class="sc">|&gt;</span> <span class="fu">left_join</span> (us_measures_qtr,<span class="at">by =</span> <span class="fu">join_by</span>(Quarter)),</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>             <span class="at">target_variable =</span> <span class="st">"value.group.median"</span>,</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>             <span class="at">exog_variable =</span> <span class="st">"UNRATE"</span>,</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>             <span class="at">do_difference =</span> <span class="cn">TRUE</span>)                          </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-ccf-lb" class="cell quarto-layout-panel">
<figure class="figure">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-ccf-lb-1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_fed_files/figure-html/fig-ccf-lb-1.png" class="img-fluid figure-img" data-ref-parent="fig-ccf-lb" width="672"></p>
<figcaption class="figure-caption">(a) RRSFS.Pop - Real Advance Retail and Food Services Sales per capita</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-ccf-lb-2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_fed_files/figure-html/fig-ccf-lb-2.png" class="img-fluid figure-img" data-ref-parent="fig-ccf-lb" width="672"></p>
<figcaption class="figure-caption">(b) CDSP - Consumer Debt Service Payments as a Percent of Disposable Personal Income</figcaption>
</figure>
</div>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-ccf-lb-3" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_fed_files/figure-html/fig-ccf-lb-3.png" class="img-fluid figure-img" data-ref-parent="fig-ccf-lb" width="672"></p>
<figcaption class="figure-caption">(c) TDSP - Household Debt Service Payments as a Percent of Disposable Personal Income</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-ccf-lb-4" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_fed_files/figure-html/fig-ccf-lb-4.png" class="img-fluid figure-img" data-ref-parent="fig-ccf-lb" width="672"></p>
<figcaption class="figure-caption">(d) UNRATE - Unemployment Rate</figcaption>
</figure>
</div>
</div>
</div>
<p></p><figcaption class="figure-caption">Figure&nbsp;4.14: Cross-Correlation Function</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div id="tabset-3-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-3-tab">
<div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">run_ccf_test</span>(<span class="at">data =</span> overdue30to89.post.lcbank <span class="sc">|&gt;</span> <span class="fu">left_join</span> (us_measures_qtr,<span class="at">by =</span> <span class="fu">join_by</span>(Quarter)),</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">target_variable =</span> <span class="st">"value.group.median"</span>,</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">exog_variable =</span> <span class="st">"RRSFS.Pop"</span>,</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">do_difference =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="fu">run_ccf_test</span>(<span class="at">data =</span> overdue30to89.post.lcbank <span class="sc">|&gt;</span> <span class="fu">left_join</span> (us_measures_qtr,<span class="at">by =</span> <span class="fu">join_by</span>(Quarter)),</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">target_variable =</span> <span class="st">"value.group.median"</span>,</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">exog_variable =</span> <span class="st">"CDSP"</span>,</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">do_difference =</span> <span class="cn">TRUE</span>)    </span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="fu">run_ccf_test</span>(<span class="at">data =</span> overdue30to89.post.lcbank <span class="sc">|&gt;</span> <span class="fu">left_join</span> (us_measures_qtr,<span class="at">by =</span> <span class="fu">join_by</span>(Quarter)),</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>             <span class="at">target_variable =</span> <span class="st">"value.group.median"</span>,</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>             <span class="at">exog_variable =</span> <span class="st">"TDSP"</span>,</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>             <span class="at">do_difference =</span> <span class="cn">TRUE</span>)    </span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a><span class="fu">run_ccf_test</span>(<span class="at">data =</span> overdue30to89.post.lcbank <span class="sc">|&gt;</span> <span class="fu">left_join</span> (us_measures_qtr,<span class="at">by =</span> <span class="fu">join_by</span>(Quarter)),</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>             <span class="at">target_variable =</span> <span class="st">"value.group.median"</span>,</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>             <span class="at">exog_variable =</span> <span class="st">"UNRATE"</span>,</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>             <span class="at">do_difference =</span> <span class="cn">TRUE</span>)                                  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-ccf-lcb" class="cell quarto-layout-panel">
<figure class="figure">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-ccf-lcb-1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_fed_files/figure-html/fig-ccf-lcb-1.png" class="img-fluid figure-img" data-ref-parent="fig-ccf-lcb" width="672"></p>
<figcaption class="figure-caption">(a) RRSFS.Pop - Real Advance Retail and Food Services Sales per capita</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-ccf-lcb-2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_fed_files/figure-html/fig-ccf-lcb-2.png" class="img-fluid figure-img" data-ref-parent="fig-ccf-lcb" width="672"></p>
<figcaption class="figure-caption">(b) CDSP - Consumer Debt Service Payments as a Percent of Disposable Personal Income</figcaption>
</figure>
</div>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-ccf-lcb-3" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_fed_files/figure-html/fig-ccf-lcb-3.png" class="img-fluid figure-img" data-ref-parent="fig-ccf-lcb" width="672"></p>
<figcaption class="figure-caption">(c) TDSP - Household Debt Service Payments as a Percent of Disposable Personal Income</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-ccf-lcb-4" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_fed_files/figure-html/fig-ccf-lcb-4.png" class="img-fluid figure-img" data-ref-parent="fig-ccf-lcb" width="672"></p>
<figcaption class="figure-caption">(d) UNRATE - Unemployment Rate</figcaption>
</figure>
</div>
</div>
</div>
<p></p><figcaption class="figure-caption">Figure&nbsp;4.15: Cross-Correlation Function</figcaption><p></p>
</figure>
</div>
</div>
</div>
</div>
</div>
<section id="cross-correlation-between-macro-economic-variables" class="level5" data-number="4.1.1.2.1">
<h5 data-number="4.1.1.2.1" class="anchored" data-anchor-id="cross-correlation-between-macro-economic-variables"><span class="header-section-number">4.1.1.2.1</span> Cross-Correlation between macro economic variables</h5>
<p><a href="#fig-ccf-rrsfs-1">Figure&nbsp;<span>4.16 (a)</span></a> and <a href="#fig-ccf-rrsfs-2">Figure&nbsp;<span>4.16 (b)</span></a> assumes <em>Real Advance Retail and Food Services Sales per capita</em> (RRSFS.Pop) is our dependant variable (Y). we observe significant correlations at both positive and negative lags. This pattern indicates a bidirectional or feedback relationship between X and the dependent variable Y. For example, <a href="#fig-ccf-rrsfs-2">Figure&nbsp;<span>4.16 (b)</span></a> shows significant correlation at -1 lag suggesting that changes in unemployment have an impact on retail and food sales in the next quarter. But there’s also a weaker but significant correlation at +1 which suggests a change in retail and food sales impacts unemployment in the following quarter. To remove the potential risk of multicollinearity we would only have one of these variables included in the same model.</p>
<div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">run_ccf_test</span>(<span class="at">data =</span> us_measures_qtr,</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">target_variable =</span> <span class="st">"RRSFS.Pop"</span>,</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">exog_variable =</span> <span class="st">"CDSP"</span>,</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">do_difference =</span> <span class="cn">TRUE</span>)</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="fu">run_ccf_test</span>(<span class="at">data =</span> us_measures_qtr,</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">target_variable =</span> <span class="st">"RRSFS.Pop"</span>,</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">exog_variable =</span> <span class="st">"UNRATE"</span>,</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">do_difference =</span> <span class="cn">TRUE</span>)                  </span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="fu">run_ccf_test</span>(<span class="at">data =</span> us_measures_qtr,</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>             <span class="at">target_variable =</span> <span class="st">"CDSP"</span>,</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>             <span class="at">exog_variable =</span> <span class="st">"UNRATE"</span>,</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>             <span class="at">do_difference =</span> <span class="cn">TRUE</span>)    </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-ccf-rrsfs" class="cell quarto-layout-panel">
<figure class="figure">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-ccf-rrsfs-1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_fed_files/figure-html/fig-ccf-rrsfs-1.png" class="img-fluid figure-img" data-ref-parent="fig-ccf-rrsfs" width="672"></p>
<figcaption class="figure-caption">(a) CCF for RRSFS.Pop (Y) and CDSP (X)</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-ccf-rrsfs-2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_fed_files/figure-html/fig-ccf-rrsfs-2.png" class="img-fluid figure-img" data-ref-parent="fig-ccf-rrsfs" width="672"></p>
<figcaption class="figure-caption">(b) CCF for RRSFS.Pop (Y) and UNRATE (X)</figcaption>
</figure>
</div>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-ccf-rrsfs-3" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_fed_files/figure-html/fig-ccf-rrsfs-3.png" class="img-fluid figure-img" data-ref-parent="fig-ccf-rrsfs" width="672"></p>
<figcaption class="figure-caption">(c) CCF for CDSP (Y) and UNRATE (X)</figcaption>
</figure>
</div>
</div>
</div>
<p></p><figcaption class="figure-caption">Figure&nbsp;4.16: Cross-Correlation Function</figcaption><p></p>
</figure>
</div>
</div>
</section>
</section>
</section>
</section>
<section id="portfolio-data" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="portfolio-data"><span class="header-section-number">4.2</span> Portfolio Data</h2>
<p>Banks have the capability to influence both the quantity and quality of their credit card portfolios. By adjusting their risk appetite, banks can navigate economic downturns more effectively; for instance, by tightening lending criteria.</p>
<p>Similarly, borrowers’ payment behaviours can evolve. <span class="citation" data-cites="Boston2016">Cole (<a href="references.html#ref-Boston2016" role="doc-biblioref">2016</a>)</span> monitored the same individuals’ credit card usage and employment status over time, revealed that borrowers tend to reduce their reliance on credit cards when they are unemployed.</p>
<p>To further understand delinquency, we can employ portfolio-level explanatory variables, such as unused credit commitments and the volume of credit card loans. For instance, an uptick in delinquency rates, absent any alterations in the portfolio, could signal macroeconomic factors affecting current borrowers. Conversely, changes within the portfolio might suggest different causes, such as a strategic decision to capture more market share by adding higher-risk borrowers - including via a partnership.</p>
<section id="statistical-tests-1" class="level3" data-number="4.2.1">
<h3 data-number="4.2.1" class="anchored" data-anchor-id="statistical-tests-1"><span class="header-section-number">4.2.1</span> Statistical tests</h3>
<section id="granger-test-1" class="level4" data-number="4.2.1.1">
<h4 data-number="4.2.1.1" class="anchored" data-anchor-id="granger-test-1"><span class="header-section-number">4.2.1.1</span> Granger Test</h4>
<div class="tabset-margin-container"></div><div id="fig-granger-port" class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true">Combined</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false">Large Bank</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-3" role="tab" aria-controls="tabset-4-3" aria-selected="false">Large Credit Card Bank</a></li></ul>
<div id="fig-granger-port" class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">granger_test_permutations</span>(<span class="at">data =</span> ubpr_data.all <span class="sc">|&gt;</span> <span class="fu">filter</span>(), </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>                            <span class="at">target_col_name =</span> <span class="st">"UBPRE524"</span>,</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>                            <span class="at">exog_names =</span> exog_measures,</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>                            <span class="at">max_lag =</span> <span class="dv">4</span>) <span class="sc">|&gt;</span> <span class="fu">list_rbind</span>() <span class="sc">|&gt;</span> <span class="fu">left_join</span>(ubpr_labs, <span class="fu">join_by</span>(exog_variable<span class="sc">==</span>UBPR_Code)) <span class="sc">|&gt;</span> rmarkdown<span class="sc">::</span><span class="fu">paged_table</span>()  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false"> <div class="table-caption"><p>Granger Test at Lags 1 to 4 (post regulatory period)</p></div>
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Df"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["F"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["Pr(>F)"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["exog_variable"],"name":[4],"type":["chr"],"align":["left"]},{"label":["Description"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"-1","2":"16.674","3":"0.000","4":"UBPRB538","5":"Loans to Individuals for Household, Family, and Other Personal Expenditures:Credit Cards"},{"1":"-2","2":"8.833","3":"0.001","4":"UBPRB538","5":"Loans to Individuals for Household, Family, and Other Personal Expenditures:Credit Cards"},{"1":"-3","2":"5.100","3":"0.005","4":"UBPRB538","5":"Loans to Individuals for Household, Family, and Other Personal Expenditures:Credit Cards"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">granger_test_permutations</span>(<span class="at">data =</span> ubpr_data.lbank <span class="sc">|&gt;</span> <span class="fu">filter</span>(), </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>                            <span class="at">target_col_name =</span> <span class="st">"UBPRE524"</span>,</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>                            <span class="at">exog_names =</span> exog_measures,</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>                            <span class="at">max_lag =</span> <span class="dv">4</span>) <span class="sc">|&gt;</span> <span class="fu">list_rbind</span>() <span class="sc">|&gt;</span> <span class="fu">left_join</span>(ubpr_labs, <span class="fu">join_by</span>(exog_variable<span class="sc">==</span>UBPR_Code)) <span class="sc">|&gt;</span> rmarkdown<span class="sc">::</span><span class="fu">paged_table</span>()  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false"> <div class="table-caption"><p>Granger Test at Lags 1 to 4 (post regulatory period)</p></div>
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Df"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["F"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["Pr(>F)"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["exog_variable"],"name":[4],"type":["chr"],"align":["left"]},{"label":["Description"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"-1","2":"5.092","3":"0.029","4":"UBPRB538","5":"Loans to Individuals for Household, Family, and Other Personal Expenditures:Credit Cards"},{"1":"-3","2":"4.670","3":"0.007","4":"UBPRE263","5":"Unused Commitments on Credit Cards as a percent of Total Assets"},{"1":"-3","2":"3.991","3":"0.015","4":"UBPRB538","5":"Loans to Individuals for Household, Family, and Other Personal Expenditures:Credit Cards"},{"1":"-4","2":"3.331","3":"0.021","4":"UBPRB538","5":"Loans to Individuals for Household, Family, and Other Personal Expenditures:Credit Cards"},{"1":"-4","2":"3.243","3":"0.023","4":"UBPRE263","5":"Unused Commitments on Credit Cards as a percent of Total Assets"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</div>
<div id="tabset-4-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-3-tab">
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">granger_test_permutations</span>(<span class="at">data =</span> ubpr_data.lcbank <span class="sc">|&gt;</span> <span class="fu">filter</span>(), </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>                            <span class="at">target_col_name =</span> <span class="st">"UBPRE524"</span>,</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>                            <span class="at">exog_names =</span> exog_measures,</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>                            <span class="at">max_lag =</span> <span class="dv">4</span>) <span class="sc">|&gt;</span> <span class="fu">list_rbind</span>() <span class="sc">|&gt;</span> <span class="fu">left_join</span>(ubpr_labs, <span class="fu">join_by</span>(exog_variable<span class="sc">==</span>UBPR_Code)) <span class="sc">|&gt;</span> rmarkdown<span class="sc">::</span><span class="fu">paged_table</span>()  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div data-pagedtable="false"> <div class="table-caption"><p>Granger Test at Lags 1 to 4 (post regulatory period)</p></div>
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Df"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["F"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["Pr(>F)"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["exog_variable"],"name":[4],"type":["chr"],"align":["left"]},{"label":["Description"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"-1","2":"17.046","3":"0.000","4":"UBPRB538","5":"Loans to Individuals for Household, Family, and Other Personal Expenditures:Credit Cards"},{"1":"-2","2":"9.241","3":"0.001","4":"UBPRB538","5":"Loans to Individuals for Household, Family, and Other Personal Expenditures:Credit Cards"},{"1":"-3","2":"4.983","3":"0.005","4":"UBPRB538","5":"Loans to Individuals for Household, Family, and Other Personal Expenditures:Credit Cards"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="cross-correlation-function-1" class="level4" data-number="4.2.1.2">
<h4 data-number="4.2.1.2" class="anchored" data-anchor-id="cross-correlation-function-1"><span class="header-section-number">4.2.1.2</span> Cross-Correlation Function</h4>
<div class="tabset-margin-container"></div><div id="fig-ccf-port" class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-5-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-1" role="tab" aria-controls="tabset-5-1" aria-selected="true">Combined</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-2" role="tab" aria-controls="tabset-5-2" aria-selected="false">Large Bank</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-3" role="tab" aria-controls="tabset-5-3" aria-selected="false">Large Credit Card Bank</a></li></ul>
<div id="fig-ccf-port" class="tab-content">
<div id="tabset-5-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-5-1-tab">
<div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>exog_measures <span class="sc">|&gt;</span> <span class="fu">map</span>(\(x) <span class="fu">run_ccf_test</span>(<span class="at">data =</span> ubpr_data.all,</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">target_variable =</span> <span class="st">"UBPRE524"</span>,</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">exog_variable =</span> x,</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">do_difference =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-ccf-port" class="cell quarto-layout-panel">
<figure class="figure">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-ccf-port-1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_fed_files/figure-html/fig-ccf-port-1.png" class="img-fluid figure-img" data-ref-parent="fig-ccf-port" width="672"></p>
<figcaption class="figure-caption">(a) UBPRE425: Credit Card Loans, % Gross LN&amp;LS</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-ccf-port-2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_fed_files/figure-html/fig-ccf-port-2.png" class="img-fluid figure-img" data-ref-parent="fig-ccf-port" width="672"></p>
<figcaption class="figure-caption">(b) UBPRE263: Unused Commitments on Credit Cards as a percent of Total Assets</figcaption>
</figure>
</div>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-ccf-port-3" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_fed_files/figure-html/fig-ccf-port-3.png" class="img-fluid figure-img" data-ref-parent="fig-ccf-port" width="672"></p>
<figcaption class="figure-caption">(c) UBPR3815: Unused Commitments on Credit Cards</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-ccf-port-4" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_fed_files/figure-html/fig-ccf-port-4.png" class="img-fluid figure-img" data-ref-parent="fig-ccf-port" width="672"></p>
<figcaption class="figure-caption">(d) UBPRB538: Loans to Individuals for Household, Family, and Other Personal Expenditures:Credit Cards</figcaption>
</figure>
</div>
</div>
</div>
<p></p><figcaption class="figure-caption">Figure&nbsp;4.17: Cross-Correlation Function</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div id="tabset-5-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-2-tab">
<div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>exog_measures <span class="sc">|&gt;</span> <span class="fu">map</span>(\(x) <span class="fu">run_ccf_test</span>(<span class="at">data =</span> ubpr_data.lbank,</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">target_variable =</span> <span class="st">"UBPRE524"</span>,</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">exog_variable =</span> x,</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">do_difference =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-ccf-port-l" class="cell quarto-layout-panel">
<figure class="figure">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-ccf-port-l-1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_fed_files/figure-html/fig-ccf-port-l-1.png" class="img-fluid figure-img" data-ref-parent="fig-ccf-port-l" width="672"></p>
<figcaption class="figure-caption">(a) UBPRE425: Credit Card Loans, % Gross LN&amp;LS</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-ccf-port-l-2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_fed_files/figure-html/fig-ccf-port-l-2.png" class="img-fluid figure-img" data-ref-parent="fig-ccf-port-l" width="672"></p>
<figcaption class="figure-caption">(b) UBPRE263: Unused Commitments on Credit Cards as a percent of Total Assets</figcaption>
</figure>
</div>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-ccf-port-l-3" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_fed_files/figure-html/fig-ccf-port-l-3.png" class="img-fluid figure-img" data-ref-parent="fig-ccf-port-l" width="672"></p>
<figcaption class="figure-caption">(c) UBPR3815: Unused Commitments on Credit Cards</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-ccf-port-l-4" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_fed_files/figure-html/fig-ccf-port-l-4.png" class="img-fluid figure-img" data-ref-parent="fig-ccf-port-l" width="672"></p>
<figcaption class="figure-caption">(d) UBPRB538: Loans to Individuals for Household, Family, and Other Personal Expenditures:Credit Cards</figcaption>
</figure>
</div>
</div>
</div>
<p></p><figcaption class="figure-caption">Figure&nbsp;4.18: Cross-Correlation Function</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div id="tabset-5-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-3-tab">
<div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>exog_measures <span class="sc">|&gt;</span> <span class="fu">map</span>(\(x) <span class="fu">run_ccf_test</span>(<span class="at">data =</span> ubpr_data.lcbank,</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">target_variable =</span> <span class="st">"UBPRE524"</span>,</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">exog_variable =</span> x,</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">do_difference =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-ccf-port-cc" class="cell quarto-layout-panel">
<figure class="figure">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-ccf-port-cc-1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_fed_files/figure-html/fig-ccf-port-cc-1.png" class="img-fluid figure-img" data-ref-parent="fig-ccf-port-cc" width="672"></p>
<figcaption class="figure-caption">(a) UBPRE425: Credit Card Loans, % Gross LN&amp;LS</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-ccf-port-cc-2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_fed_files/figure-html/fig-ccf-port-cc-2.png" class="img-fluid figure-img" data-ref-parent="fig-ccf-port-cc" width="672"></p>
<figcaption class="figure-caption">(b) UBPRE263: Unused Commitments on Credit Cards as a percent of Total Assets</figcaption>
</figure>
</div>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-ccf-port-cc-3" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_fed_files/figure-html/fig-ccf-port-cc-3.png" class="img-fluid figure-img" data-ref-parent="fig-ccf-port-cc" width="672"></p>
<figcaption class="figure-caption">(c) UBPR3815: Unused Commitments on Credit Cards</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-ccf-port-cc-4" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data_fed_files/figure-html/fig-ccf-port-cc-4.png" class="img-fluid figure-img" data-ref-parent="fig-ccf-port-cc" width="672"></p>
<figcaption class="figure-caption">(d) UBPRB538: Loans to Individuals for Household, Family, and Other Personal Expenditures:Credit Cards</figcaption>
</figure>
</div>
</div>
</div>
<p></p><figcaption class="figure-caption">Figure&nbsp;4.19: Cross-Correlation Function</figcaption><p></p>
</figure>
</div>
</div>
</div>
</div>
</div>


<!-- -->

<div id="refs" class="references csl-bib-body hanging-indent" role="list" style="display: none">
<div id="ref-Boston2016" class="csl-entry" role="listitem">
Cole, Allison. 2016. <span>“Do Consumers Rely More Heavily on Credit Cards While Unemployed?”</span> <a href="https://www.bostonfed.org/publications/research-data-report/2016/do-consumers-rely-more-heavily-on-credit-cards-while-unemployed.aspx">https://www.bostonfed.org/publications/research-data-report/2016/do-consumers-rely-more-heavily-on-credit-cards-while-unemployed.aspx</a>.
</div>
<div id="ref-granger2011" class="csl-entry" role="listitem">
Giles, Dave. 2011. <span>“Testing for Granger Causality.”</span> <a href="https://davegiles.blogspot.com/2011/04/testing-for-granger-causality.html">https://davegiles.blogspot.com/2011/04/testing-for-granger-causality.html</a>.
</div>
<div id="ref-GHJ2001" class="csl-entry" role="listitem">
Grieb, Terrance, Charles Hegji, and Steven T. Jones. 2001. <span>“Macroeconomic Factors, Consumer Behavior, and Bankcard Default Rates.”</span> <em>Journal of Economics and Finance</em> 25 (3): 316–27. <a href="https://doi.org/10.1007/BF02745892">https://doi.org/10.1007/BF02745892</a>.
</div>
<div id="ref-Agarwal2003" class="csl-entry" role="listitem">
Liu, Chunlin, and Sumit Agarwal. 2003. <span>“Determinants of Credit Card Delinquency and Bankruptcy: Macroeconomic Factors.”</span> <em>Journal of Economics and Finance</em> 27 (March): 75–84. <a href="https://doi.org/10.1007/BF02751591">https://doi.org/10.1007/BF02751591</a>.
</div>
<div id="ref-fred" class="csl-entry" role="listitem">
St. Louis, Federal Reserve Bank of. 2023. <span>“Federal Reserve Economic Data.”</span> Federal Reserve Bank of St. Louis. <a href="https://fred.stlouisfed.org/">https://fred.stlouisfed.org/</a>.
</div>
<div id="ref-taghiyeh2021" class="csl-entry" role="listitem">
Taghiyeh, Sajjad, David C. Lengacher, and Robert B. Handfield. 2021. <span>“Loss Rate Forecasting Framework Based on Macroeconomic Changes: Application to US Credit Card Industry.”</span> <em>Expert Systems With Applications</em> 165. <a href="https://doi.org/10.1016/j.eswa.2020.113954">https://doi.org/10.1016/j.eswa.2020.113954</a>.
</div>
</div>
</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./data_partners.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Bank Partnerships</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./model_event.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Event Studies</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb17" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Explanatory Data"</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span><span class="co"> html</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="fu">## US Economic Data</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">'functions.R'</span>)</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>                </span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>granger_test_permutations <span class="ot">&lt;-</span> <span class="cf">function</span>(data, <span class="at">target_col_name =</span> <span class="st">"value.mean"</span>, exog_names, <span class="at">max_lag =</span> <span class="dv">4</span>) {</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>    results <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (lag <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>max_lag) {</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>        results[[lag]] <span class="ot">&lt;-</span> exog_names <span class="sc">|&gt;</span></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>                            purrr<span class="sc">::</span><span class="fu">map</span>(\(x) <span class="fu">run_granger_test</span>(data, target_col_name, x, lag)) <span class="sc">|&gt;</span> <span class="fu">list_rbind</span>() <span class="sc">|&gt;</span> <span class="fu">arrange</span>(<span class="st">`</span><span class="at">Pr(&gt;F)</span><span class="st">`</span>) <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="st">`</span><span class="at">Pr(&gt;F)</span><span class="st">`</span> <span class="sc">&lt;=</span> <span class="fl">0.05</span>) <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="fu">across</span>(F<span class="sc">:</span><span class="st">`</span><span class="at">Pr(&gt;F)</span><span class="st">`</span>, <span class="sc">~</span> <span class="fu">round</span>(.,<span class="dv">3</span>))) <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>Res.Df)       </span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>    } </span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>    results </span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>}    </span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>us_measures_qtr <span class="ot">&lt;-</span> <span class="fu">us_economy.quarterly_selected</span>() <span class="sc">|&gt;</span> <span class="fu">drop_na</span>()</span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>apply_bank_filters <span class="ot">=</span> <span class="cn">TRUE</span></span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>apply_reg_filter <span class="ot">=</span> <span class="cn">FALSE</span></span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a>overdue30to89.all <span class="ot">&lt;-</span> <span class="fu">credit_card.overdue30to89.agg</span>(apply_bank_filters, apply_reg_filter) </span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a>overdue30to89.all.lcbank <span class="ot">&lt;-</span> <span class="fu">credit_card.overdue30to89.agg.lccbank</span>(apply_bank_filters, apply_reg_filter)</span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>overdue30to89.all.lbank <span class="ot">&lt;-</span>  <span class="fu">credit_card.overdue30to89.agg.lbank</span>(apply_bank_filters, apply_reg_filter)</span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a>apply_reg_filter <span class="ot">=</span> <span class="cn">TRUE</span>  </span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a>overdue30to89.post <span class="ot">&lt;-</span> <span class="fu">credit_card.overdue30to89.agg</span>(apply_bank_filters, apply_reg_filter)       </span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a>overdue30to89.post.lcbank <span class="ot">&lt;-</span> <span class="fu">credit_card.overdue30to89.agg.lccbank</span>(apply_bank_filters, apply_reg_filter)</span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a>overdue30to89.post.lbank <span class="ot">&lt;-</span>  <span class="fu">credit_card.overdue30to89.agg.lbank</span>(apply_bank_filters, apply_reg_filter)             </span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb17-37"><a href="#cb17-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-38"><a href="#cb17-38" aria-hidden="true" tabindex="-1"></a>As discussed in @sec-trend-event the impact of the partnership event can be masked by trends and seasonality.</span>
<span id="cb17-39"><a href="#cb17-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-40"><a href="#cb17-40" aria-hidden="true" tabindex="-1"></a>The simplest model approach we look at is the Market model, see @sec-model-market, which involves adjusting each Bank's *`r credit_card.target_label()`* by removing the influence of the broader trend within its respective group (Large Banks or Large Credit Card Banks). We assume the residuals are due to the unique characteristics of each Bank's credit card portfolio. These characteristics might include the bank's specific credit policies, customer risk profiles, or portfolio management strategies.</span>
<span id="cb17-41"><a href="#cb17-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-42"><a href="#cb17-42" aria-hidden="true" tabindex="-1"></a>This approach assumes that the broader "market" trend takes into account, to some extent, the impact of macroeconomic variables. However, we may want to include macroeconomic variables to improve the model's ability to explain credit card delinquencies that are not captured by the group trend alone.</span>
<span id="cb17-43"><a href="#cb17-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-44"><a href="#cb17-44" aria-hidden="true" tabindex="-1"></a>US Federal Reserve Economic Data <span class="co">[</span><span class="ot">-@fred</span><span class="co">]</span> provides macroeconomic data series; we can use published literature and new analysis to inform our choice of variables.</span>
<span id="cb17-45"><a href="#cb17-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-46"><a href="#cb17-46" aria-hidden="true" tabindex="-1"></a>The figures below plot data series related to consumer financial behaviour before and after the 2008 financial crisis and the enactment of the Credit Card Accountability Responsibility and Disclosure (CARD) Act in 2010 (see @sec-cardact). We can see that the onset of the COVID-19 pandemic marks a distinct phase of economic upheaval.</span>
<span id="cb17-47"><a href="#cb17-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-48"><a href="#cb17-48" aria-hidden="true" tabindex="-1"></a>Each variable has been adjusted for population changes and inflation to ensure we can compare across different time periods.</span>
<span id="cb17-49"><a href="#cb17-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-50"><a href="#cb17-50" aria-hidden="true" tabindex="-1"></a>@GHJ2001, over the period 1981 to 1999, found that delinquency is positively correlated with the *consumer debt service ratio*, which is the ability for borrowers to service their consumer loans relative to disposable income. Consumer loans include credit cards, other revolving credit and term loans. In the decade that ensued post 2008 crisis, there is a noticeable trend of increasing personal expenditures and although personal incomes also increase, their rate of increase does not match that of expenditures. This divergence results in a gradual rise in the consumer debt service ratio (CDSP), indicating an expanding gap between income and debt obligations. Notably, this isn't reflected in credit card delinquency rates which remain relatively stable suggesting consumer debt is no longer a strong determinant of delinquency by itself. The broader measure, household debt (TDSP), which is consumer debt plus mortgage loans, may be a more informative of measure of a household's overall financial health. We can see in @fig-econ-cat-comb-3 that household debt was decreasing while consumer debt increased. </span>
<span id="cb17-51"><a href="#cb17-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-52"><a href="#cb17-52" aria-hidden="true" tabindex="-1"></a>@Agarwal2003, using proprietary credit card data of 700 thousand customers from 1995 to 2001, concluded that *unemployment* is a key determinant of consumer delinquency and bankruptcy. However, @taghiyeh2021 in their 2021 study concluded that unemployment is no longer sufficient. This can be seen in @fig-econ-cat-comb-4 where post 2008 financial crisis delinquency decreased as unemployment decreased but has since remained relatively stable as unemployment as decreased further. @taghiyeh2021 found the most significant variables to predict credit card loss was: previous quarter *Unemployment*, *Building permits* and *Initial unemployment insurance claims*; previous year's (lag 4) *Money stock* and *ISM Purchasing Mangers Index* and the current quarter's *Weekly hours worked by manufacturing workers*. </span>
<span id="cb17-53"><a href="#cb17-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-54"><a href="#cb17-54" aria-hidden="true" tabindex="-1"></a>::: {#fig-usmeasures .panel-tabset}</span>
<span id="cb17-55"><a href="#cb17-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-56"><a href="#cb17-56" aria-hidden="true" tabindex="-1"></a><span class="fu">## Combined</span></span>
<span id="cb17-59"><a href="#cb17-59" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb17-60"><a href="#cb17-60" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb17-61"><a href="#cb17-61" aria-hidden="true" tabindex="-1"></a><span class="co">#| error: false</span></span>
<span id="cb17-62"><a href="#cb17-62" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-econ-cat-comb</span></span>
<span id="cb17-63"><a href="#cb17-63" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-subcap: </span></span>
<span id="cb17-64"><a href="#cb17-64" aria-hidden="true" tabindex="-1"></a><span class="co">#|   - "Expenditure Measures"</span></span>
<span id="cb17-65"><a href="#cb17-65" aria-hidden="true" tabindex="-1"></a><span class="co">#|   - "Income &amp; Savings Measures"</span></span>
<span id="cb17-66"><a href="#cb17-66" aria-hidden="true" tabindex="-1"></a><span class="co">#|   - "Debt Measures"</span></span>
<span id="cb17-67"><a href="#cb17-67" aria-hidden="true" tabindex="-1"></a><span class="co">#|   - "Unemployment and Confidence Measures" </span></span>
<span id="cb17-68"><a href="#cb17-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-69"><a href="#cb17-69" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_us_category</span>(<span class="st">"Expenditures"</span>,us_measures_qtr, overdue30to89.all, <span class="st">"value.all.median"</span>)</span>
<span id="cb17-70"><a href="#cb17-70" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_us_category</span>(<span class="st">"Income &amp; Savings"</span>,us_measures_qtr, overdue30to89.all, <span class="st">"value.all.median"</span>)</span>
<span id="cb17-71"><a href="#cb17-71" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_us_category</span>(<span class="st">"Debt"</span>,us_measures_qtr, overdue30to89.all, <span class="st">"value.all.median"</span>)</span>
<span id="cb17-72"><a href="#cb17-72" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_us_category</span>(<span class="st">"Economy"</span>,us_measures_qtr, overdue30to89.all, <span class="st">"value.all.median"</span>)</span>
<span id="cb17-73"><a href="#cb17-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-74"><a href="#cb17-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-75"><a href="#cb17-75" aria-hidden="true" tabindex="-1"></a>    <span class="co"># measures = us_measures_qtr</span></span>
<span id="cb17-76"><a href="#cb17-76" aria-hidden="true" tabindex="-1"></a>    <span class="co"># target_data = overdue30to89.all </span></span>
<span id="cb17-77"><a href="#cb17-77" aria-hidden="true" tabindex="-1"></a>    <span class="co"># target_measure = "value.all.median"</span></span>
<span id="cb17-78"><a href="#cb17-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-79"><a href="#cb17-79" aria-hidden="true" tabindex="-1"></a>    <span class="co"># target_label &lt;-credit_card.target_label()</span></span>
<span id="cb17-80"><a href="#cb17-80" aria-hidden="true" tabindex="-1"></a>    <span class="co"># index_var &lt;- index_var(measures)</span></span>
<span id="cb17-81"><a href="#cb17-81" aria-hidden="true" tabindex="-1"></a>    <span class="co"># recessions &lt;- us_economy.recession() |&gt; </span></span>
<span id="cb17-82"><a href="#cb17-82" aria-hidden="true" tabindex="-1"></a>    <span class="co">#                 filter(Flag == 1, </span></span>
<span id="cb17-83"><a href="#cb17-83" aria-hidden="true" tabindex="-1"></a>    <span class="co">#                        Month &gt;= ym("1989-10"))</span></span>
<span id="cb17-84"><a href="#cb17-84" aria-hidden="true" tabindex="-1"></a>    <span class="co"># data &lt;- measures |&gt; drop_na() |&gt;</span></span>
<span id="cb17-85"><a href="#cb17-85" aria-hidden="true" tabindex="-1"></a>    <span class="co">#           mutate(across(!as.name(index_var), scale))</span></span>
<span id="cb17-86"><a href="#cb17-86" aria-hidden="true" tabindex="-1"></a>    <span class="co"># max_y &lt;- max_tstibble(data)     </span></span>
<span id="cb17-87"><a href="#cb17-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-88"><a href="#cb17-88" aria-hidden="true" tabindex="-1"></a>    <span class="co"># data |&gt;        </span></span>
<span id="cb17-89"><a href="#cb17-89" aria-hidden="true" tabindex="-1"></a>    <span class="co">#     pivot_longer(cols = !Quarter) |&gt;</span></span>
<span id="cb17-90"><a href="#cb17-90" aria-hidden="true" tabindex="-1"></a>    <span class="co">#     left_join(us_economy.labels(), by = join_by(name==Name)) |&gt;</span></span>
<span id="cb17-91"><a href="#cb17-91" aria-hidden="true" tabindex="-1"></a>    <span class="co">#     filter(name %in% c("UNRATE", "TDSP","CDSP")) |&gt;</span></span>
<span id="cb17-92"><a href="#cb17-92" aria-hidden="true" tabindex="-1"></a>    <span class="co">#     mutate(comb_label = paste(name, "-", Desc, "(", Formula, ")")) |&gt;</span></span>
<span id="cb17-93"><a href="#cb17-93" aria-hidden="true" tabindex="-1"></a>    <span class="co">#     ggplot(aes(x = Quarter, y = value, colour = comb_label)) + </span></span>
<span id="cb17-94"><a href="#cb17-94" aria-hidden="true" tabindex="-1"></a>    <span class="co">#     geom_line() +theme_bw() +</span></span>
<span id="cb17-95"><a href="#cb17-95" aria-hidden="true" tabindex="-1"></a>    <span class="co">#     theme(legend.direction = "vertical",legend.position = "top", legend.title=element_blank(),</span></span>
<span id="cb17-96"><a href="#cb17-96" aria-hidden="true" tabindex="-1"></a>    <span class="co">#           plot.title = element_markdown(size = 12),</span></span>
<span id="cb17-97"><a href="#cb17-97" aria-hidden="true" tabindex="-1"></a>    <span class="co">#           plot.subtitle = element_text(size = 9)) +</span></span>
<span id="cb17-98"><a href="#cb17-98" aria-hidden="true" tabindex="-1"></a>    <span class="co">#     labs(y = "Normalised (Normal=0)",</span></span>
<span id="cb17-99"><a href="#cb17-99" aria-hidden="true" tabindex="-1"></a>    <span class="co">#         title = glue("Macroeconomic measures against median &lt;span style='color:darkred'&gt;**{target_label}**&lt;/span&gt;"),</span></span>
<span id="cb17-100"><a href="#cb17-100" aria-hidden="true" tabindex="-1"></a>    <span class="co">#         subtitle = "Recessions shown in boxed area") +     </span></span>
<span id="cb17-101"><a href="#cb17-101" aria-hidden="true" tabindex="-1"></a>    <span class="co">#     geom_rect(data = recessions,inherit.aes = FALSE, </span></span>
<span id="cb17-102"><a href="#cb17-102" aria-hidden="true" tabindex="-1"></a>    <span class="co">#               aes(xmin = Month, xmax = Month + 30, ymin = -Inf, ymax = Inf), fill = "lightgrey", alpha = 0.5) +</span></span>
<span id="cb17-103"><a href="#cb17-103" aria-hidden="true" tabindex="-1"></a>    <span class="co">#     geom_line(mapping = aes(y = !!as.name(target_measure)), data = target_data,</span></span>
<span id="cb17-104"><a href="#cb17-104" aria-hidden="true" tabindex="-1"></a>    <span class="co">#               colour = 'darkred') +</span></span>
<span id="cb17-105"><a href="#cb17-105" aria-hidden="true" tabindex="-1"></a>    <span class="co">#     geom_vline(xintercept = as.numeric(yq(get_regulation_cutoff())), linetype=3,colour="darkred") +</span></span>
<span id="cb17-106"><a href="#cb17-106" aria-hidden="true" tabindex="-1"></a>    <span class="co">#     annotate("text", x=as.numeric(yq(get_regulation_cutoff())), y=max_y-1, size = 9/.pt, label="Credit Card Regulations",vjust = 0.5, hjust = -0.15, colour = "black") +</span></span>
<span id="cb17-107"><a href="#cb17-107" aria-hidden="true" tabindex="-1"></a>    <span class="co">#     scale_colour_colorblind7()          </span></span>
<span id="cb17-108"><a href="#cb17-108" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb17-109"><a href="#cb17-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-110"><a href="#cb17-110" aria-hidden="true" tabindex="-1"></a><span class="fu">## Large Bank</span></span>
<span id="cb17-113"><a href="#cb17-113" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb17-114"><a href="#cb17-114" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb17-115"><a href="#cb17-115" aria-hidden="true" tabindex="-1"></a><span class="co">#| error: false</span></span>
<span id="cb17-116"><a href="#cb17-116" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-econ-cat-lc</span></span>
<span id="cb17-117"><a href="#cb17-117" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-subcap: </span></span>
<span id="cb17-118"><a href="#cb17-118" aria-hidden="true" tabindex="-1"></a><span class="co">#|   - "Expenditure Measures"</span></span>
<span id="cb17-119"><a href="#cb17-119" aria-hidden="true" tabindex="-1"></a><span class="co">#|   - "Income &amp; Savings Measures"</span></span>
<span id="cb17-120"><a href="#cb17-120" aria-hidden="true" tabindex="-1"></a><span class="co">#|   - "Debt Measures"</span></span>
<span id="cb17-121"><a href="#cb17-121" aria-hidden="true" tabindex="-1"></a><span class="co">#|   - "Unemployment and Confidence Measures" </span></span>
<span id="cb17-122"><a href="#cb17-122" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_us_category</span>(<span class="st">"Expenditures"</span>, us_measures_qtr, overdue30to89.all.lbank, <span class="st">"value.group.median"</span>)</span>
<span id="cb17-123"><a href="#cb17-123" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_us_category</span>(<span class="st">"Income &amp; Savings"</span>, us_measures_qtr, overdue30to89.all.lbank, <span class="st">"value.group.median"</span>)</span>
<span id="cb17-124"><a href="#cb17-124" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_us_category</span>(<span class="st">"Debt"</span>, us_measures_qtr, overdue30to89.all.lbank, <span class="st">"value.group.median"</span>)</span>
<span id="cb17-125"><a href="#cb17-125" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_us_category</span>(<span class="st">"Economy"</span>, us_measures_qtr, overdue30to89.all.lbank, <span class="st">"value.group.median"</span>)</span>
<span id="cb17-126"><a href="#cb17-126" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb17-127"><a href="#cb17-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-128"><a href="#cb17-128" aria-hidden="true" tabindex="-1"></a><span class="fu">## Large Credit Card Bank</span></span>
<span id="cb17-131"><a href="#cb17-131" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb17-132"><a href="#cb17-132" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb17-133"><a href="#cb17-133" aria-hidden="true" tabindex="-1"></a><span class="co">#| error: false</span></span>
<span id="cb17-134"><a href="#cb17-134" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-econ-cat-lcc</span></span>
<span id="cb17-135"><a href="#cb17-135" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-subcap: </span></span>
<span id="cb17-136"><a href="#cb17-136" aria-hidden="true" tabindex="-1"></a><span class="co">#|   - "Expenditure Measures"</span></span>
<span id="cb17-137"><a href="#cb17-137" aria-hidden="true" tabindex="-1"></a><span class="co">#|   - "Income &amp; Savings Measures"</span></span>
<span id="cb17-138"><a href="#cb17-138" aria-hidden="true" tabindex="-1"></a><span class="co">#|   - "Debt Measures"</span></span>
<span id="cb17-139"><a href="#cb17-139" aria-hidden="true" tabindex="-1"></a><span class="co">#|   - "Unemployment and Confidence Measures" </span></span>
<span id="cb17-140"><a href="#cb17-140" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_us_category</span>(<span class="st">"Expenditures"</span>, us_measures_qtr, overdue30to89.all.lcbank, <span class="st">"value.group.median"</span>)</span>
<span id="cb17-141"><a href="#cb17-141" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_us_category</span>(<span class="st">"Income &amp; Savings"</span>, us_measures_qtr, overdue30to89.all.lcbank, <span class="st">"value.group.median"</span>)</span>
<span id="cb17-142"><a href="#cb17-142" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_us_category</span>(<span class="st">"Debt"</span>, us_measures_qtr, overdue30to89.all.lcbank, <span class="st">"value.group.median"</span>)</span>
<span id="cb17-143"><a href="#cb17-143" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_us_category</span>(<span class="st">"Economy"</span>, us_measures_qtr, overdue30to89.all.lcbank, <span class="st">"value.group.median"</span>)</span>
<span id="cb17-144"><a href="#cb17-144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-145"><a href="#cb17-145" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb17-146"><a href="#cb17-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-147"><a href="#cb17-147" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb17-148"><a href="#cb17-148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-149"><a href="#cb17-149" aria-hidden="true" tabindex="-1"></a><span class="fu">### Statistical tests</span></span>
<span id="cb17-150"><a href="#cb17-150" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-151"><a href="#cb17-151" aria-hidden="true" tabindex="-1"></a>In time series analysis we can use tests like Cross-Correlation Function (CCF) and Granger Test to understand relationships between variables.</span>
<span id="cb17-152"><a href="#cb17-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-153"><a href="#cb17-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-154"><a href="#cb17-154" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Granger Test</span></span>
<span id="cb17-155"><a href="#cb17-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-156"><a href="#cb17-156" aria-hidden="true" tabindex="-1"></a>Intuitively, changes in the macroeconomic environment will take time to impact credit card delinquency. We can test for significance of different lags using the Granger test for each variable.</span>
<span id="cb17-157"><a href="#cb17-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-158"><a href="#cb17-158" aria-hidden="true" tabindex="-1"></a>"X is said to Granger-cause Y if Y can be better predicted using the histories of both X and Y than it can by using the history of Y alone."<span class="co">[</span><span class="ot">@granger2011</span><span class="co">]</span></span>
<span id="cb17-159"><a href="#cb17-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-160"><a href="#cb17-160" aria-hidden="true" tabindex="-1"></a>The tables presented below, show the macroeconomic variable and lag (Df column) that Granger-cause *`r credit_card.target_label()`* (Y).</span>
<span id="cb17-161"><a href="#cb17-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-162"><a href="#cb17-162" aria-hidden="true" tabindex="-1"></a>::: {#fig-granger .panel-tabset}</span>
<span id="cb17-163"><a href="#cb17-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-164"><a href="#cb17-164" aria-hidden="true" tabindex="-1"></a><span class="fu">## Combined</span></span>
<span id="cb17-165"><a href="#cb17-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-168"><a href="#cb17-168" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb17-169"><a href="#cb17-169" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb17-170"><a href="#cb17-170" aria-hidden="true" tabindex="-1"></a><span class="co">#| error: false</span></span>
<span id="cb17-171"><a href="#cb17-171" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-granger-comb</span></span>
<span id="cb17-172"><a href="#cb17-172" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: Granger Test at Lags 1 to 4</span></span>
<span id="cb17-173"><a href="#cb17-173" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-subcap: </span></span>
<span id="cb17-174"><a href="#cb17-174" aria-hidden="true" tabindex="-1"></a><span class="co">#|  - "Post regulatory period"</span></span>
<span id="cb17-175"><a href="#cb17-175" aria-hidden="true" tabindex="-1"></a><span class="co">#|  - "Pre-pandemic post regulatory period"</span></span>
<span id="cb17-176"><a href="#cb17-176" aria-hidden="true" tabindex="-1"></a><span class="co">#| layout-ncol: 1</span></span>
<span id="cb17-177"><a href="#cb17-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-178"><a href="#cb17-178" aria-hidden="true" tabindex="-1"></a><span class="fu">granger_test_permutations</span>(<span class="at">data =</span> overdue30to89.post <span class="sc">|&gt;</span> <span class="fu">left_join</span> (us_measures_qtr,<span class="at">by =</span> <span class="fu">join_by</span>(Quarter)), </span>
<span id="cb17-179"><a href="#cb17-179" aria-hidden="true" tabindex="-1"></a>                            <span class="at">target_col_name =</span> <span class="st">"value.all.median"</span>,</span>
<span id="cb17-180"><a href="#cb17-180" aria-hidden="true" tabindex="-1"></a>                            <span class="at">exog_names =</span> <span class="fu">names</span>(us_measures_qtr),</span>
<span id="cb17-181"><a href="#cb17-181" aria-hidden="true" tabindex="-1"></a>                            <span class="at">max_lag =</span> <span class="dv">4</span>) <span class="sc">|&gt;</span> <span class="fu">list_rbind</span>() <span class="sc">|&gt;</span> <span class="fu">left_join</span>(<span class="fu">us_economy.labels</span>(), <span class="fu">join_by</span>(exog_variable<span class="sc">==</span>Name)) <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(Formula, Category)) <span class="sc">|&gt;</span> rmarkdown<span class="sc">::</span><span class="fu">paged_table</span>()</span>
<span id="cb17-182"><a href="#cb17-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-183"><a href="#cb17-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-184"><a href="#cb17-184" aria-hidden="true" tabindex="-1"></a><span class="fu">granger_test_permutations</span>(<span class="at">data =</span> overdue30to89.post <span class="sc">|&gt;</span> <span class="fu">filter_index</span>(<span class="sc">~</span> <span class="st">"2020"</span>) <span class="sc">|&gt;</span> <span class="fu">left_join</span> (us_measures_qtr,<span class="at">by =</span> <span class="fu">join_by</span>(Quarter)), </span>
<span id="cb17-185"><a href="#cb17-185" aria-hidden="true" tabindex="-1"></a>                            <span class="at">target_col_name =</span> <span class="st">"value.all.median"</span>,</span>
<span id="cb17-186"><a href="#cb17-186" aria-hidden="true" tabindex="-1"></a>                            <span class="at">exog_names =</span> <span class="fu">names</span>(us_measures_qtr),</span>
<span id="cb17-187"><a href="#cb17-187" aria-hidden="true" tabindex="-1"></a>                            <span class="at">max_lag =</span> <span class="dv">4</span>) <span class="sc">|&gt;</span> <span class="fu">list_rbind</span>() <span class="sc">|&gt;</span> <span class="fu">left_join</span>(<span class="fu">us_economy.labels</span>(), <span class="fu">join_by</span>(exog_variable<span class="sc">==</span>Name)) <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(Formula, Category)) <span class="sc">|&gt;</span> rmarkdown<span class="sc">::</span><span class="fu">paged_table</span>()</span>
<span id="cb17-188"><a href="#cb17-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-189"><a href="#cb17-189" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb17-190"><a href="#cb17-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-191"><a href="#cb17-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-192"><a href="#cb17-192" aria-hidden="true" tabindex="-1"></a><span class="fu">## Large Bank</span></span>
<span id="cb17-193"><a href="#cb17-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-196"><a href="#cb17-196" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb17-197"><a href="#cb17-197" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb17-198"><a href="#cb17-198" aria-hidden="true" tabindex="-1"></a><span class="co">#| error: false</span></span>
<span id="cb17-199"><a href="#cb17-199" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-granger-lb</span></span>
<span id="cb17-200"><a href="#cb17-200" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: Granger Test at Lags 1 to 4</span></span>
<span id="cb17-201"><a href="#cb17-201" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-subcap: </span></span>
<span id="cb17-202"><a href="#cb17-202" aria-hidden="true" tabindex="-1"></a><span class="co">#|  - "Post regulatory period"</span></span>
<span id="cb17-203"><a href="#cb17-203" aria-hidden="true" tabindex="-1"></a><span class="co">#|  - "Pre-pandemic post regulatory period"</span></span>
<span id="cb17-204"><a href="#cb17-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-205"><a href="#cb17-205" aria-hidden="true" tabindex="-1"></a><span class="fu">granger_test_permutations</span>(<span class="at">data =</span> overdue30to89.post.lbank <span class="sc">|&gt;</span> <span class="fu">left_join</span> (us_measures_qtr,<span class="at">by =</span> <span class="fu">join_by</span>(Quarter)), </span>
<span id="cb17-206"><a href="#cb17-206" aria-hidden="true" tabindex="-1"></a>                            <span class="at">target_col_name =</span> <span class="st">"value.group.median"</span>,</span>
<span id="cb17-207"><a href="#cb17-207" aria-hidden="true" tabindex="-1"></a>                            <span class="at">exog_names =</span> <span class="fu">names</span>(us_measures_qtr),</span>
<span id="cb17-208"><a href="#cb17-208" aria-hidden="true" tabindex="-1"></a>                            <span class="at">max_lag =</span> <span class="dv">4</span>) <span class="sc">|&gt;</span> <span class="fu">list_rbind</span>() <span class="sc">|&gt;</span> <span class="fu">left_join</span>(<span class="fu">us_economy.labels</span>(), <span class="fu">join_by</span>(exog_variable<span class="sc">==</span>Name)) <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(Formula, Category)) <span class="sc">|&gt;</span> rmarkdown<span class="sc">::</span><span class="fu">paged_table</span>()  </span>
<span id="cb17-209"><a href="#cb17-209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-210"><a href="#cb17-210" aria-hidden="true" tabindex="-1"></a><span class="fu">granger_test_permutations</span>(<span class="at">data =</span> overdue30to89.post.lbank <span class="sc">|&gt;</span> <span class="fu">filter_index</span>(<span class="sc">~</span> <span class="st">"2020"</span>) <span class="sc">|&gt;</span> <span class="fu">left_join</span> (us_measures_qtr,<span class="at">by =</span> <span class="fu">join_by</span>(Quarter)), </span>
<span id="cb17-211"><a href="#cb17-211" aria-hidden="true" tabindex="-1"></a>                            <span class="at">target_col_name =</span> <span class="st">"value.group.median"</span>,</span>
<span id="cb17-212"><a href="#cb17-212" aria-hidden="true" tabindex="-1"></a>                            <span class="at">exog_names =</span> <span class="fu">names</span>(us_measures_qtr),</span>
<span id="cb17-213"><a href="#cb17-213" aria-hidden="true" tabindex="-1"></a>                            <span class="at">max_lag =</span> <span class="dv">4</span>) <span class="sc">|&gt;</span> <span class="fu">list_rbind</span>() <span class="sc">|&gt;</span> <span class="fu">left_join</span>(<span class="fu">us_economy.labels</span>(), <span class="fu">join_by</span>(exog_variable<span class="sc">==</span>Name)) <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(Formula, Category)) <span class="sc">|&gt;</span> rmarkdown<span class="sc">::</span><span class="fu">paged_table</span>()  </span>
<span id="cb17-214"><a href="#cb17-214" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb17-215"><a href="#cb17-215" aria-hidden="true" tabindex="-1"></a><span class="fu">## Large Credit Card Bank</span></span>
<span id="cb17-216"><a href="#cb17-216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-219"><a href="#cb17-219" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb17-220"><a href="#cb17-220" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb17-221"><a href="#cb17-221" aria-hidden="true" tabindex="-1"></a><span class="co">#| error: false</span></span>
<span id="cb17-222"><a href="#cb17-222" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-granger-lcb</span></span>
<span id="cb17-223"><a href="#cb17-223" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: Granger Test at Lags 1 to 4</span></span>
<span id="cb17-224"><a href="#cb17-224" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-subcap: </span></span>
<span id="cb17-225"><a href="#cb17-225" aria-hidden="true" tabindex="-1"></a><span class="co">#|  - "Post regulatory period"</span></span>
<span id="cb17-226"><a href="#cb17-226" aria-hidden="true" tabindex="-1"></a><span class="co">#|  - "Pre-pandemic post regulatory period"</span></span>
<span id="cb17-227"><a href="#cb17-227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-228"><a href="#cb17-228" aria-hidden="true" tabindex="-1"></a><span class="fu">granger_test_permutations</span>(<span class="at">data =</span> overdue30to89.post.lcbank <span class="sc">|&gt;</span> <span class="fu">left_join</span> (us_measures_qtr,<span class="at">by =</span> <span class="fu">join_by</span>(Quarter)), </span>
<span id="cb17-229"><a href="#cb17-229" aria-hidden="true" tabindex="-1"></a>                            <span class="at">target_col_name =</span> <span class="st">"value.group.median"</span>,</span>
<span id="cb17-230"><a href="#cb17-230" aria-hidden="true" tabindex="-1"></a>                            <span class="at">exog_names =</span> <span class="fu">names</span>(us_measures_qtr),</span>
<span id="cb17-231"><a href="#cb17-231" aria-hidden="true" tabindex="-1"></a>                            <span class="at">max_lag =</span> <span class="dv">4</span>) <span class="sc">|&gt;</span> <span class="fu">list_rbind</span>() <span class="sc">|&gt;</span> <span class="fu">left_join</span>(<span class="fu">us_economy.labels</span>(), <span class="fu">join_by</span>(exog_variable<span class="sc">==</span>Name)) <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(Formula, Category)) <span class="sc">|&gt;</span> rmarkdown<span class="sc">::</span><span class="fu">paged_table</span>()  </span>
<span id="cb17-232"><a href="#cb17-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-233"><a href="#cb17-233" aria-hidden="true" tabindex="-1"></a><span class="fu">granger_test_permutations</span>(<span class="at">data =</span> overdue30to89.post.lcbank <span class="sc">|&gt;</span> <span class="fu">filter_index</span>(<span class="sc">~</span> <span class="st">"2020"</span>) <span class="sc">|&gt;</span> <span class="fu">left_join</span> (us_measures_qtr,<span class="at">by =</span> <span class="fu">join_by</span>(Quarter)), </span>
<span id="cb17-234"><a href="#cb17-234" aria-hidden="true" tabindex="-1"></a>                            <span class="at">target_col_name =</span> <span class="st">"value.group.median"</span>,</span>
<span id="cb17-235"><a href="#cb17-235" aria-hidden="true" tabindex="-1"></a>                            <span class="at">exog_names =</span> <span class="fu">names</span>(us_measures_qtr),</span>
<span id="cb17-236"><a href="#cb17-236" aria-hidden="true" tabindex="-1"></a>                            <span class="at">max_lag =</span> <span class="dv">4</span>) <span class="sc">|&gt;</span> <span class="fu">list_rbind</span>() <span class="sc">|&gt;</span> <span class="fu">left_join</span>(<span class="fu">us_economy.labels</span>(), <span class="fu">join_by</span>(exog_variable<span class="sc">==</span>Name)) <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(Formula, Category)) <span class="sc">|&gt;</span> rmarkdown<span class="sc">::</span><span class="fu">paged_table</span>()                              </span>
<span id="cb17-237"><a href="#cb17-237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-238"><a href="#cb17-238" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb17-239"><a href="#cb17-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-240"><a href="#cb17-240" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb17-241"><a href="#cb17-241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-242"><a href="#cb17-242" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Cross-Correlation Function </span></span>
<span id="cb17-243"><a href="#cb17-243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-244"><a href="#cb17-244" aria-hidden="true" tabindex="-1"></a>The Cross-Correlation function measures the correlation between series X at time $t+k$ and series Y at time $t$, for various lags $k$. A positive $k$ indicates future values of X relative to Y, conversely, a negative $k$ indicates past values of X relative to Y.</span>
<span id="cb17-245"><a href="#cb17-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-246"><a href="#cb17-246" aria-hidden="true" tabindex="-1"></a>Below tests various macroeconomic variables (X) against *`r credit_card.target_label()`* (Y).</span>
<span id="cb17-247"><a href="#cb17-247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-248"><a href="#cb17-248" aria-hidden="true" tabindex="-1"></a>::: {#fig-ccf .panel-tabset}</span>
<span id="cb17-249"><a href="#cb17-249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-250"><a href="#cb17-250" aria-hidden="true" tabindex="-1"></a><span class="fu">## Combined</span></span>
<span id="cb17-251"><a href="#cb17-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-254"><a href="#cb17-254" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb17-255"><a href="#cb17-255" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb17-256"><a href="#cb17-256" aria-hidden="true" tabindex="-1"></a><span class="co">#| error: false</span></span>
<span id="cb17-257"><a href="#cb17-257" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-ccf</span></span>
<span id="cb17-258"><a href="#cb17-258" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Cross-Correlation Function"</span></span>
<span id="cb17-259"><a href="#cb17-259" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-subcap:</span></span>
<span id="cb17-260"><a href="#cb17-260" aria-hidden="true" tabindex="-1"></a><span class="co">#|   - "RRSFS.Pop - Real Advance Retail and Food Services Sales per capita"</span></span>
<span id="cb17-261"><a href="#cb17-261" aria-hidden="true" tabindex="-1"></a><span class="co">#|   - "CDSP - Consumer Debt Service Payments as a Percent of Disposable Personal Income"</span></span>
<span id="cb17-262"><a href="#cb17-262" aria-hidden="true" tabindex="-1"></a><span class="co">#|   - "TDSP - Household Debt Service Payments as a Percent of Disposable Personal Income"</span></span>
<span id="cb17-263"><a href="#cb17-263" aria-hidden="true" tabindex="-1"></a><span class="co">#|   - "UNRATE - Unemployment Rate"</span></span>
<span id="cb17-264"><a href="#cb17-264" aria-hidden="true" tabindex="-1"></a><span class="co">#| layout-ncol: 2</span></span>
<span id="cb17-265"><a href="#cb17-265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-266"><a href="#cb17-266" aria-hidden="true" tabindex="-1"></a><span class="fu">run_ccf_test</span>(<span class="at">data =</span> overdue30to89.post <span class="sc">|&gt;</span> <span class="fu">left_join</span> (us_measures_qtr,<span class="at">by =</span> <span class="fu">join_by</span>(Quarter)),</span>
<span id="cb17-267"><a href="#cb17-267" aria-hidden="true" tabindex="-1"></a>             <span class="at">target_variable =</span> <span class="st">"value.all.median"</span>,</span>
<span id="cb17-268"><a href="#cb17-268" aria-hidden="true" tabindex="-1"></a>             <span class="at">exog_variable =</span> <span class="st">"RRSFS.Pop"</span>,</span>
<span id="cb17-269"><a href="#cb17-269" aria-hidden="true" tabindex="-1"></a>             <span class="at">do_difference =</span> <span class="cn">TRUE</span>)</span>
<span id="cb17-270"><a href="#cb17-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-271"><a href="#cb17-271" aria-hidden="true" tabindex="-1"></a><span class="fu">run_ccf_test</span>(<span class="at">data =</span> overdue30to89.post <span class="sc">|&gt;</span> <span class="fu">left_join</span> (us_measures_qtr,<span class="at">by =</span> <span class="fu">join_by</span>(Quarter)),</span>
<span id="cb17-272"><a href="#cb17-272" aria-hidden="true" tabindex="-1"></a>             <span class="at">target_variable =</span> <span class="st">"value.all.median"</span>,</span>
<span id="cb17-273"><a href="#cb17-273" aria-hidden="true" tabindex="-1"></a>             <span class="at">exog_variable =</span> <span class="st">"CDSP"</span>,</span>
<span id="cb17-274"><a href="#cb17-274" aria-hidden="true" tabindex="-1"></a>             <span class="at">do_difference =</span> <span class="cn">TRUE</span>)    </span>
<span id="cb17-275"><a href="#cb17-275" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-276"><a href="#cb17-276" aria-hidden="true" tabindex="-1"></a><span class="fu">run_ccf_test</span>(<span class="at">data =</span> overdue30to89.post <span class="sc">|&gt;</span> <span class="fu">left_join</span> (us_measures_qtr,<span class="at">by =</span> <span class="fu">join_by</span>(Quarter)),</span>
<span id="cb17-277"><a href="#cb17-277" aria-hidden="true" tabindex="-1"></a>             <span class="at">target_variable =</span> <span class="st">"value.all.median"</span>,</span>
<span id="cb17-278"><a href="#cb17-278" aria-hidden="true" tabindex="-1"></a>             <span class="at">exog_variable =</span> <span class="st">"TDSP"</span>,</span>
<span id="cb17-279"><a href="#cb17-279" aria-hidden="true" tabindex="-1"></a>             <span class="at">do_difference =</span> <span class="cn">TRUE</span>)    </span>
<span id="cb17-280"><a href="#cb17-280" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-281"><a href="#cb17-281" aria-hidden="true" tabindex="-1"></a><span class="fu">run_ccf_test</span>(<span class="at">data =</span> overdue30to89.post <span class="sc">|&gt;</span> <span class="fu">left_join</span> (us_measures_qtr,<span class="at">by =</span> <span class="fu">join_by</span>(Quarter)),</span>
<span id="cb17-282"><a href="#cb17-282" aria-hidden="true" tabindex="-1"></a>             <span class="at">target_variable =</span> <span class="st">"value.all.median"</span>,</span>
<span id="cb17-283"><a href="#cb17-283" aria-hidden="true" tabindex="-1"></a>             <span class="at">exog_variable =</span> <span class="st">"UNRATE"</span>,</span>
<span id="cb17-284"><a href="#cb17-284" aria-hidden="true" tabindex="-1"></a>             <span class="at">do_difference =</span> <span class="cn">TRUE</span>)                          </span>
<span id="cb17-285"><a href="#cb17-285" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-286"><a href="#cb17-286" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb17-287"><a href="#cb17-287" aria-hidden="true" tabindex="-1"></a><span class="fu">## Large Bank</span></span>
<span id="cb17-288"><a href="#cb17-288" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-291"><a href="#cb17-291" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb17-292"><a href="#cb17-292" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb17-293"><a href="#cb17-293" aria-hidden="true" tabindex="-1"></a><span class="co">#| error: false</span></span>
<span id="cb17-294"><a href="#cb17-294" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-ccf-lb</span></span>
<span id="cb17-295"><a href="#cb17-295" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Cross-Correlation Function"</span></span>
<span id="cb17-296"><a href="#cb17-296" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-subcap:</span></span>
<span id="cb17-297"><a href="#cb17-297" aria-hidden="true" tabindex="-1"></a><span class="co">#|   - "RRSFS.Pop - Real Advance Retail and Food Services Sales per capita"</span></span>
<span id="cb17-298"><a href="#cb17-298" aria-hidden="true" tabindex="-1"></a><span class="co">#|   - "CDSP - Consumer Debt Service Payments as a Percent of Disposable Personal Income"</span></span>
<span id="cb17-299"><a href="#cb17-299" aria-hidden="true" tabindex="-1"></a><span class="co">#|   - "TDSP - Household Debt Service Payments as a Percent of Disposable Personal Income"</span></span>
<span id="cb17-300"><a href="#cb17-300" aria-hidden="true" tabindex="-1"></a><span class="co">#|   - "UNRATE - Unemployment Rate"</span></span>
<span id="cb17-301"><a href="#cb17-301" aria-hidden="true" tabindex="-1"></a><span class="co">#| layout-ncol: 2</span></span>
<span id="cb17-302"><a href="#cb17-302" aria-hidden="true" tabindex="-1"></a><span class="fu">run_ccf_test</span>(<span class="at">data =</span> overdue30to89.post.lbank <span class="sc">|&gt;</span> <span class="fu">left_join</span> (us_measures_qtr,<span class="at">by =</span> <span class="fu">join_by</span>(Quarter)),</span>
<span id="cb17-303"><a href="#cb17-303" aria-hidden="true" tabindex="-1"></a>             <span class="at">target_variable =</span> <span class="st">"value.group.median"</span>,</span>
<span id="cb17-304"><a href="#cb17-304" aria-hidden="true" tabindex="-1"></a>             <span class="at">exog_variable =</span> <span class="st">"RRSFS.Pop"</span>,</span>
<span id="cb17-305"><a href="#cb17-305" aria-hidden="true" tabindex="-1"></a>             <span class="at">do_difference =</span> <span class="cn">TRUE</span>)</span>
<span id="cb17-306"><a href="#cb17-306" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-307"><a href="#cb17-307" aria-hidden="true" tabindex="-1"></a><span class="fu">run_ccf_test</span>(<span class="at">data =</span> overdue30to89.post.lbank <span class="sc">|&gt;</span> <span class="fu">left_join</span> (us_measures_qtr,<span class="at">by =</span> <span class="fu">join_by</span>(Quarter)),</span>
<span id="cb17-308"><a href="#cb17-308" aria-hidden="true" tabindex="-1"></a>             <span class="at">target_variable =</span> <span class="st">"value.group.median"</span>,</span>
<span id="cb17-309"><a href="#cb17-309" aria-hidden="true" tabindex="-1"></a>             <span class="at">exog_variable =</span> <span class="st">"CDSP"</span>,</span>
<span id="cb17-310"><a href="#cb17-310" aria-hidden="true" tabindex="-1"></a>             <span class="at">do_difference =</span> <span class="cn">TRUE</span>)    </span>
<span id="cb17-311"><a href="#cb17-311" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-312"><a href="#cb17-312" aria-hidden="true" tabindex="-1"></a><span class="fu">run_ccf_test</span>(<span class="at">data =</span> overdue30to89.post.lbank <span class="sc">|&gt;</span> <span class="fu">left_join</span> (us_measures_qtr,<span class="at">by =</span> <span class="fu">join_by</span>(Quarter)),</span>
<span id="cb17-313"><a href="#cb17-313" aria-hidden="true" tabindex="-1"></a>             <span class="at">target_variable =</span> <span class="st">"value.group.median"</span>,</span>
<span id="cb17-314"><a href="#cb17-314" aria-hidden="true" tabindex="-1"></a>             <span class="at">exog_variable =</span> <span class="st">"TDSP"</span>,</span>
<span id="cb17-315"><a href="#cb17-315" aria-hidden="true" tabindex="-1"></a>             <span class="at">do_difference =</span> <span class="cn">TRUE</span>)                 </span>
<span id="cb17-316"><a href="#cb17-316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-317"><a href="#cb17-317" aria-hidden="true" tabindex="-1"></a><span class="fu">run_ccf_test</span>(<span class="at">data =</span> overdue30to89.post.lbank <span class="sc">|&gt;</span> <span class="fu">left_join</span> (us_measures_qtr,<span class="at">by =</span> <span class="fu">join_by</span>(Quarter)),</span>
<span id="cb17-318"><a href="#cb17-318" aria-hidden="true" tabindex="-1"></a>             <span class="at">target_variable =</span> <span class="st">"value.group.median"</span>,</span>
<span id="cb17-319"><a href="#cb17-319" aria-hidden="true" tabindex="-1"></a>             <span class="at">exog_variable =</span> <span class="st">"UNRATE"</span>,</span>
<span id="cb17-320"><a href="#cb17-320" aria-hidden="true" tabindex="-1"></a>             <span class="at">do_difference =</span> <span class="cn">TRUE</span>)                          </span>
<span id="cb17-321"><a href="#cb17-321" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-322"><a href="#cb17-322" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb17-323"><a href="#cb17-323" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-324"><a href="#cb17-324" aria-hidden="true" tabindex="-1"></a><span class="fu">## Large Credit Card Bank</span></span>
<span id="cb17-325"><a href="#cb17-325" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-328"><a href="#cb17-328" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb17-329"><a href="#cb17-329" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb17-330"><a href="#cb17-330" aria-hidden="true" tabindex="-1"></a><span class="co">#| error: false</span></span>
<span id="cb17-331"><a href="#cb17-331" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-ccf-lcb</span></span>
<span id="cb17-332"><a href="#cb17-332" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Cross-Correlation Function"</span></span>
<span id="cb17-333"><a href="#cb17-333" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-subcap:</span></span>
<span id="cb17-334"><a href="#cb17-334" aria-hidden="true" tabindex="-1"></a><span class="co">#|   - "RRSFS.Pop - Real Advance Retail and Food Services Sales per capita"</span></span>
<span id="cb17-335"><a href="#cb17-335" aria-hidden="true" tabindex="-1"></a><span class="co">#|   - "CDSP - Consumer Debt Service Payments as a Percent of Disposable Personal Income"</span></span>
<span id="cb17-336"><a href="#cb17-336" aria-hidden="true" tabindex="-1"></a><span class="co">#|   - "TDSP - Household Debt Service Payments as a Percent of Disposable Personal Income"</span></span>
<span id="cb17-337"><a href="#cb17-337" aria-hidden="true" tabindex="-1"></a><span class="co">#|   - "UNRATE - Unemployment Rate"</span></span>
<span id="cb17-338"><a href="#cb17-338" aria-hidden="true" tabindex="-1"></a><span class="co">#| layout-ncol: 2</span></span>
<span id="cb17-339"><a href="#cb17-339" aria-hidden="true" tabindex="-1"></a><span class="fu">run_ccf_test</span>(<span class="at">data =</span> overdue30to89.post.lcbank <span class="sc">|&gt;</span> <span class="fu">left_join</span> (us_measures_qtr,<span class="at">by =</span> <span class="fu">join_by</span>(Quarter)),</span>
<span id="cb17-340"><a href="#cb17-340" aria-hidden="true" tabindex="-1"></a>             <span class="at">target_variable =</span> <span class="st">"value.group.median"</span>,</span>
<span id="cb17-341"><a href="#cb17-341" aria-hidden="true" tabindex="-1"></a>             <span class="at">exog_variable =</span> <span class="st">"RRSFS.Pop"</span>,</span>
<span id="cb17-342"><a href="#cb17-342" aria-hidden="true" tabindex="-1"></a>             <span class="at">do_difference =</span> <span class="cn">TRUE</span>)</span>
<span id="cb17-343"><a href="#cb17-343" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-344"><a href="#cb17-344" aria-hidden="true" tabindex="-1"></a><span class="fu">run_ccf_test</span>(<span class="at">data =</span> overdue30to89.post.lcbank <span class="sc">|&gt;</span> <span class="fu">left_join</span> (us_measures_qtr,<span class="at">by =</span> <span class="fu">join_by</span>(Quarter)),</span>
<span id="cb17-345"><a href="#cb17-345" aria-hidden="true" tabindex="-1"></a>             <span class="at">target_variable =</span> <span class="st">"value.group.median"</span>,</span>
<span id="cb17-346"><a href="#cb17-346" aria-hidden="true" tabindex="-1"></a>             <span class="at">exog_variable =</span> <span class="st">"CDSP"</span>,</span>
<span id="cb17-347"><a href="#cb17-347" aria-hidden="true" tabindex="-1"></a>             <span class="at">do_difference =</span> <span class="cn">TRUE</span>)    </span>
<span id="cb17-348"><a href="#cb17-348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-349"><a href="#cb17-349" aria-hidden="true" tabindex="-1"></a><span class="fu">run_ccf_test</span>(<span class="at">data =</span> overdue30to89.post.lcbank <span class="sc">|&gt;</span> <span class="fu">left_join</span> (us_measures_qtr,<span class="at">by =</span> <span class="fu">join_by</span>(Quarter)),</span>
<span id="cb17-350"><a href="#cb17-350" aria-hidden="true" tabindex="-1"></a>             <span class="at">target_variable =</span> <span class="st">"value.group.median"</span>,</span>
<span id="cb17-351"><a href="#cb17-351" aria-hidden="true" tabindex="-1"></a>             <span class="at">exog_variable =</span> <span class="st">"TDSP"</span>,</span>
<span id="cb17-352"><a href="#cb17-352" aria-hidden="true" tabindex="-1"></a>             <span class="at">do_difference =</span> <span class="cn">TRUE</span>)    </span>
<span id="cb17-353"><a href="#cb17-353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-354"><a href="#cb17-354" aria-hidden="true" tabindex="-1"></a><span class="fu">run_ccf_test</span>(<span class="at">data =</span> overdue30to89.post.lcbank <span class="sc">|&gt;</span> <span class="fu">left_join</span> (us_measures_qtr,<span class="at">by =</span> <span class="fu">join_by</span>(Quarter)),</span>
<span id="cb17-355"><a href="#cb17-355" aria-hidden="true" tabindex="-1"></a>             <span class="at">target_variable =</span> <span class="st">"value.group.median"</span>,</span>
<span id="cb17-356"><a href="#cb17-356" aria-hidden="true" tabindex="-1"></a>             <span class="at">exog_variable =</span> <span class="st">"UNRATE"</span>,</span>
<span id="cb17-357"><a href="#cb17-357" aria-hidden="true" tabindex="-1"></a>             <span class="at">do_difference =</span> <span class="cn">TRUE</span>)                                  </span>
<span id="cb17-358"><a href="#cb17-358" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-359"><a href="#cb17-359" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb17-360"><a href="#cb17-360" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-361"><a href="#cb17-361" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb17-362"><a href="#cb17-362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-363"><a href="#cb17-363" aria-hidden="true" tabindex="-1"></a><span class="fu">##### Cross-Correlation between macro economic variables</span></span>
<span id="cb17-364"><a href="#cb17-364" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-365"><a href="#cb17-365" aria-hidden="true" tabindex="-1"></a>@fig-ccf-rrsfs-1 and @fig-ccf-rrsfs-2 assumes *Real Advance Retail and Food Services Sales per capita* (RRSFS.Pop) is our dependant variable (Y). we observe significant correlations at both positive and negative lags. This pattern indicates a bidirectional or feedback relationship between X and the dependent variable Y. For example, @fig-ccf-rrsfs-2 shows significant correlation at -1 lag suggesting that changes in unemployment have an impact on retail and food sales in the next quarter. But there's also a weaker but significant correlation at +1 which suggests a change in retail and food sales impacts unemployment in the following quarter. To remove the potential risk of multicollinearity we would only have one of these variables included in the same model.  </span>
<span id="cb17-366"><a href="#cb17-366" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-369"><a href="#cb17-369" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb17-370"><a href="#cb17-370" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb17-371"><a href="#cb17-371" aria-hidden="true" tabindex="-1"></a><span class="co">#| error: false</span></span>
<span id="cb17-372"><a href="#cb17-372" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-ccf-rrsfs</span></span>
<span id="cb17-373"><a href="#cb17-373" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Cross-Correlation Function"</span></span>
<span id="cb17-374"><a href="#cb17-374" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-subcap:</span></span>
<span id="cb17-375"><a href="#cb17-375" aria-hidden="true" tabindex="-1"></a><span class="co">#|   - "CCF for RRSFS.Pop (Y) and CDSP (X)"</span></span>
<span id="cb17-376"><a href="#cb17-376" aria-hidden="true" tabindex="-1"></a><span class="co">#|   - "CCF for RRSFS.Pop (Y) and UNRATE (X)"</span></span>
<span id="cb17-377"><a href="#cb17-377" aria-hidden="true" tabindex="-1"></a><span class="co">#|   - "CCF for CDSP (Y) and UNRATE (X)"</span></span>
<span id="cb17-378"><a href="#cb17-378" aria-hidden="true" tabindex="-1"></a><span class="co">#| layout-ncol: 2 </span></span>
<span id="cb17-379"><a href="#cb17-379" aria-hidden="true" tabindex="-1"></a><span class="fu">run_ccf_test</span>(<span class="at">data =</span> us_measures_qtr,</span>
<span id="cb17-380"><a href="#cb17-380" aria-hidden="true" tabindex="-1"></a>             <span class="at">target_variable =</span> <span class="st">"RRSFS.Pop"</span>,</span>
<span id="cb17-381"><a href="#cb17-381" aria-hidden="true" tabindex="-1"></a>             <span class="at">exog_variable =</span> <span class="st">"CDSP"</span>,</span>
<span id="cb17-382"><a href="#cb17-382" aria-hidden="true" tabindex="-1"></a>             <span class="at">do_difference =</span> <span class="cn">TRUE</span>)</span>
<span id="cb17-383"><a href="#cb17-383" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-384"><a href="#cb17-384" aria-hidden="true" tabindex="-1"></a><span class="fu">run_ccf_test</span>(<span class="at">data =</span> us_measures_qtr,</span>
<span id="cb17-385"><a href="#cb17-385" aria-hidden="true" tabindex="-1"></a>             <span class="at">target_variable =</span> <span class="st">"RRSFS.Pop"</span>,</span>
<span id="cb17-386"><a href="#cb17-386" aria-hidden="true" tabindex="-1"></a>             <span class="at">exog_variable =</span> <span class="st">"UNRATE"</span>,</span>
<span id="cb17-387"><a href="#cb17-387" aria-hidden="true" tabindex="-1"></a>             <span class="at">do_difference =</span> <span class="cn">TRUE</span>)                  </span>
<span id="cb17-388"><a href="#cb17-388" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-389"><a href="#cb17-389" aria-hidden="true" tabindex="-1"></a><span class="fu">run_ccf_test</span>(<span class="at">data =</span> us_measures_qtr,</span>
<span id="cb17-390"><a href="#cb17-390" aria-hidden="true" tabindex="-1"></a>             <span class="at">target_variable =</span> <span class="st">"CDSP"</span>,</span>
<span id="cb17-391"><a href="#cb17-391" aria-hidden="true" tabindex="-1"></a>             <span class="at">exog_variable =</span> <span class="st">"UNRATE"</span>,</span>
<span id="cb17-392"><a href="#cb17-392" aria-hidden="true" tabindex="-1"></a>             <span class="at">do_difference =</span> <span class="cn">TRUE</span>)    </span>
<span id="cb17-393"><a href="#cb17-393" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-394"><a href="#cb17-394" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb17-395"><a href="#cb17-395" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-396"><a href="#cb17-396" aria-hidden="true" tabindex="-1"></a><span class="fu">## Portfolio Data</span></span>
<span id="cb17-397"><a href="#cb17-397" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-398"><a href="#cb17-398" aria-hidden="true" tabindex="-1"></a>Banks have the capability to influence both the quantity and quality of their credit card portfolios. By adjusting their risk appetite, banks can navigate economic downturns more effectively; for instance, by tightening lending criteria.</span>
<span id="cb17-399"><a href="#cb17-399" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-400"><a href="#cb17-400" aria-hidden="true" tabindex="-1"></a>Similarly, borrowers' payment behaviours can evolve. @Boston2016 monitored the same individuals' credit card usage and employment status over time, revealed that borrowers tend to reduce their reliance on credit cards when they are unemployed.</span>
<span id="cb17-401"><a href="#cb17-401" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-402"><a href="#cb17-402" aria-hidden="true" tabindex="-1"></a>To further understand delinquency, we can employ portfolio-level explanatory variables, such as unused credit commitments and the volume of credit card loans. For instance, an uptick in delinquency rates, absent any alterations in the portfolio, could signal macroeconomic factors affecting current borrowers. Conversely, changes within the portfolio might suggest different causes, such as a strategic decision to capture more market share by adding higher-risk borrowers - including via a partnership.</span>
<span id="cb17-403"><a href="#cb17-403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-404"><a href="#cb17-404" aria-hidden="true" tabindex="-1"></a><span class="fu">### Statistical tests</span></span>
<span id="cb17-405"><a href="#cb17-405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-406"><a href="#cb17-406" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Granger Test</span></span>
<span id="cb17-407"><a href="#cb17-407" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-410"><a href="#cb17-410" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb17-411"><a href="#cb17-411" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb17-412"><a href="#cb17-412" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb17-413"><a href="#cb17-413" aria-hidden="true" tabindex="-1"></a>ubpr_data <span class="ot">&lt;-</span> <span class="fu">get_model_data</span>()<span class="sc">$</span>all_data <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">select</span>(dplyr<span class="sc">::</span><span class="fu">matches</span>(<span class="st">"UBPR.*.Value"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb17-414"><a href="#cb17-414" aria-hidden="true" tabindex="-1"></a>                <span class="fu">rename_with</span>(<span class="sc">~</span><span class="fu">str_remove</span>(., <span class="st">'.Value'</span>)) <span class="sc">|&gt;</span></span>
<span id="cb17-415"><a href="#cb17-415" aria-hidden="true" tabindex="-1"></a>                <span class="fu">group_by</span>(BankType) <span class="sc">|&gt;</span></span>
<span id="cb17-416"><a href="#cb17-416" aria-hidden="true" tabindex="-1"></a>                <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), \(x) <span class="fu">mean</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)))</span>
<span id="cb17-417"><a href="#cb17-417" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-418"><a href="#cb17-418" aria-hidden="true" tabindex="-1"></a>exog_measures <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"UBPR3815"</span>,<span class="st">"UBPRB538"</span>, <span class="st">"UBPRE263"</span>, <span class="st">"UBPRE425"</span>)</span>
<span id="cb17-419"><a href="#cb17-419" aria-hidden="true" tabindex="-1"></a>ubpr_data.lbank <span class="ot">&lt;-</span> ubpr_data <span class="sc">|&gt;</span> <span class="fu">filter</span>(BankType <span class="sc">==</span> <span class="st">"LargeBank"</span>)</span>
<span id="cb17-420"><a href="#cb17-420" aria-hidden="true" tabindex="-1"></a>ubpr_data.lcbank <span class="ot">&lt;-</span> ubpr_data <span class="sc">|&gt;</span> <span class="fu">filter</span>(BankType <span class="sc">==</span> <span class="st">"LargeCreditCardBank"</span>)</span>
<span id="cb17-421"><a href="#cb17-421" aria-hidden="true" tabindex="-1"></a>ubpr_data.all <span class="ot">&lt;-</span> ubpr_data <span class="sc">|&gt;</span> <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), \(x) <span class="fu">mean</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)))</span>
<span id="cb17-422"><a href="#cb17-422" aria-hidden="true" tabindex="-1"></a>ubpr_labs <span class="ot">&lt;-</span> <span class="fu">credit_card.udpr</span>()</span>
<span id="cb17-423"><a href="#cb17-423" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb17-424"><a href="#cb17-424" aria-hidden="true" tabindex="-1"></a>::: {#fig-granger-port .panel-tabset}</span>
<span id="cb17-425"><a href="#cb17-425" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-426"><a href="#cb17-426" aria-hidden="true" tabindex="-1"></a><span class="fu">## Combined</span></span>
<span id="cb17-429"><a href="#cb17-429" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb17-430"><a href="#cb17-430" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb17-431"><a href="#cb17-431" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Granger Test at Lags 1 to 4 (post regulatory period)"</span></span>
<span id="cb17-432"><a href="#cb17-432" aria-hidden="true" tabindex="-1"></a><span class="fu">granger_test_permutations</span>(<span class="at">data =</span> ubpr_data.all <span class="sc">|&gt;</span> <span class="fu">filter</span>(), </span>
<span id="cb17-433"><a href="#cb17-433" aria-hidden="true" tabindex="-1"></a>                            <span class="at">target_col_name =</span> <span class="st">"UBPRE524"</span>,</span>
<span id="cb17-434"><a href="#cb17-434" aria-hidden="true" tabindex="-1"></a>                            <span class="at">exog_names =</span> exog_measures,</span>
<span id="cb17-435"><a href="#cb17-435" aria-hidden="true" tabindex="-1"></a>                            <span class="at">max_lag =</span> <span class="dv">4</span>) <span class="sc">|&gt;</span> <span class="fu">list_rbind</span>() <span class="sc">|&gt;</span> <span class="fu">left_join</span>(ubpr_labs, <span class="fu">join_by</span>(exog_variable<span class="sc">==</span>UBPR_Code)) <span class="sc">|&gt;</span> rmarkdown<span class="sc">::</span><span class="fu">paged_table</span>()  </span>
<span id="cb17-436"><a href="#cb17-436" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb17-437"><a href="#cb17-437" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-438"><a href="#cb17-438" aria-hidden="true" tabindex="-1"></a><span class="fu">## Large Bank</span></span>
<span id="cb17-441"><a href="#cb17-441" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb17-442"><a href="#cb17-442" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb17-443"><a href="#cb17-443" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Granger Test at Lags 1 to 4 (post regulatory period)"</span></span>
<span id="cb17-444"><a href="#cb17-444" aria-hidden="true" tabindex="-1"></a><span class="fu">granger_test_permutations</span>(<span class="at">data =</span> ubpr_data.lbank <span class="sc">|&gt;</span> <span class="fu">filter</span>(), </span>
<span id="cb17-445"><a href="#cb17-445" aria-hidden="true" tabindex="-1"></a>                            <span class="at">target_col_name =</span> <span class="st">"UBPRE524"</span>,</span>
<span id="cb17-446"><a href="#cb17-446" aria-hidden="true" tabindex="-1"></a>                            <span class="at">exog_names =</span> exog_measures,</span>
<span id="cb17-447"><a href="#cb17-447" aria-hidden="true" tabindex="-1"></a>                            <span class="at">max_lag =</span> <span class="dv">4</span>) <span class="sc">|&gt;</span> <span class="fu">list_rbind</span>() <span class="sc">|&gt;</span> <span class="fu">left_join</span>(ubpr_labs, <span class="fu">join_by</span>(exog_variable<span class="sc">==</span>UBPR_Code)) <span class="sc">|&gt;</span> rmarkdown<span class="sc">::</span><span class="fu">paged_table</span>()  </span>
<span id="cb17-448"><a href="#cb17-448" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb17-449"><a href="#cb17-449" aria-hidden="true" tabindex="-1"></a><span class="fu">## Large Credit Card Bank</span></span>
<span id="cb17-452"><a href="#cb17-452" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb17-453"><a href="#cb17-453" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb17-454"><a href="#cb17-454" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Granger Test at Lags 1 to 4 (post regulatory period)"</span></span>
<span id="cb17-455"><a href="#cb17-455" aria-hidden="true" tabindex="-1"></a><span class="fu">granger_test_permutations</span>(<span class="at">data =</span> ubpr_data.lcbank <span class="sc">|&gt;</span> <span class="fu">filter</span>(), </span>
<span id="cb17-456"><a href="#cb17-456" aria-hidden="true" tabindex="-1"></a>                            <span class="at">target_col_name =</span> <span class="st">"UBPRE524"</span>,</span>
<span id="cb17-457"><a href="#cb17-457" aria-hidden="true" tabindex="-1"></a>                            <span class="at">exog_names =</span> exog_measures,</span>
<span id="cb17-458"><a href="#cb17-458" aria-hidden="true" tabindex="-1"></a>                            <span class="at">max_lag =</span> <span class="dv">4</span>) <span class="sc">|&gt;</span> <span class="fu">list_rbind</span>() <span class="sc">|&gt;</span> <span class="fu">left_join</span>(ubpr_labs, <span class="fu">join_by</span>(exog_variable<span class="sc">==</span>UBPR_Code)) <span class="sc">|&gt;</span> rmarkdown<span class="sc">::</span><span class="fu">paged_table</span>()  </span>
<span id="cb17-459"><a href="#cb17-459" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-460"><a href="#cb17-460" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb17-461"><a href="#cb17-461" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-462"><a href="#cb17-462" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb17-463"><a href="#cb17-463" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-464"><a href="#cb17-464" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Cross-Correlation Function  </span></span>
<span id="cb17-465"><a href="#cb17-465" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-466"><a href="#cb17-466" aria-hidden="true" tabindex="-1"></a>::: {#fig-ccf-port .panel-tabset}</span>
<span id="cb17-467"><a href="#cb17-467" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-468"><a href="#cb17-468" aria-hidden="true" tabindex="-1"></a><span class="fu">## Combined</span></span>
<span id="cb17-471"><a href="#cb17-471" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb17-472"><a href="#cb17-472" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-ccf-port</span></span>
<span id="cb17-473"><a href="#cb17-473" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Cross-Correlation Function"</span></span>
<span id="cb17-474"><a href="#cb17-474" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-subcap:</span></span>
<span id="cb17-475"><a href="#cb17-475" aria-hidden="true" tabindex="-1"></a><span class="co">#|   - "UBPRE425: Credit Card Loans, % Gross LN&amp;LS"</span></span>
<span id="cb17-476"><a href="#cb17-476" aria-hidden="true" tabindex="-1"></a><span class="co">#|   - "UBPRE263: Unused Commitments on Credit Cards as a percent of Total Assets"</span></span>
<span id="cb17-477"><a href="#cb17-477" aria-hidden="true" tabindex="-1"></a><span class="co">#|   - "UBPR3815: Unused Commitments on Credit Cards"</span></span>
<span id="cb17-478"><a href="#cb17-478" aria-hidden="true" tabindex="-1"></a><span class="co">#|   - "UBPRB538: Loans to Individuals for Household, Family, and Other Personal Expenditures:Credit Cards"</span></span>
<span id="cb17-479"><a href="#cb17-479" aria-hidden="true" tabindex="-1"></a><span class="co">#| results: hide</span></span>
<span id="cb17-480"><a href="#cb17-480" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-keep: all</span></span>
<span id="cb17-481"><a href="#cb17-481" aria-hidden="true" tabindex="-1"></a><span class="co">#| layout-ncol: 2 </span></span>
<span id="cb17-482"><a href="#cb17-482" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-483"><a href="#cb17-483" aria-hidden="true" tabindex="-1"></a>exog_measures <span class="sc">|&gt;</span> <span class="fu">map</span>(\(x) <span class="fu">run_ccf_test</span>(<span class="at">data =</span> ubpr_data.all,</span>
<span id="cb17-484"><a href="#cb17-484" aria-hidden="true" tabindex="-1"></a>             <span class="at">target_variable =</span> <span class="st">"UBPRE524"</span>,</span>
<span id="cb17-485"><a href="#cb17-485" aria-hidden="true" tabindex="-1"></a>             <span class="at">exog_variable =</span> x,</span>
<span id="cb17-486"><a href="#cb17-486" aria-hidden="true" tabindex="-1"></a>             <span class="at">do_difference =</span> <span class="cn">TRUE</span>))</span>
<span id="cb17-487"><a href="#cb17-487" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb17-488"><a href="#cb17-488" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-489"><a href="#cb17-489" aria-hidden="true" tabindex="-1"></a><span class="fu">## Large Bank</span></span>
<span id="cb17-492"><a href="#cb17-492" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb17-493"><a href="#cb17-493" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-ccf-port-l</span></span>
<span id="cb17-494"><a href="#cb17-494" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Cross-Correlation Function"</span></span>
<span id="cb17-495"><a href="#cb17-495" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-subcap:</span></span>
<span id="cb17-496"><a href="#cb17-496" aria-hidden="true" tabindex="-1"></a><span class="co">#|   - "UBPRE425: Credit Card Loans, % Gross LN&amp;LS"</span></span>
<span id="cb17-497"><a href="#cb17-497" aria-hidden="true" tabindex="-1"></a><span class="co">#|   - "UBPRE263: Unused Commitments on Credit Cards as a percent of Total Assets"</span></span>
<span id="cb17-498"><a href="#cb17-498" aria-hidden="true" tabindex="-1"></a><span class="co">#|   - "UBPR3815: Unused Commitments on Credit Cards"</span></span>
<span id="cb17-499"><a href="#cb17-499" aria-hidden="true" tabindex="-1"></a><span class="co">#|   - "UBPRB538: Loans to Individuals for Household, Family, and Other Personal Expenditures:Credit Cards"</span></span>
<span id="cb17-500"><a href="#cb17-500" aria-hidden="true" tabindex="-1"></a><span class="co">#| results: hide</span></span>
<span id="cb17-501"><a href="#cb17-501" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-keep: all</span></span>
<span id="cb17-502"><a href="#cb17-502" aria-hidden="true" tabindex="-1"></a><span class="co">#| layout-ncol: 2</span></span>
<span id="cb17-503"><a href="#cb17-503" aria-hidden="true" tabindex="-1"></a>exog_measures <span class="sc">|&gt;</span> <span class="fu">map</span>(\(x) <span class="fu">run_ccf_test</span>(<span class="at">data =</span> ubpr_data.lbank,</span>
<span id="cb17-504"><a href="#cb17-504" aria-hidden="true" tabindex="-1"></a>             <span class="at">target_variable =</span> <span class="st">"UBPRE524"</span>,</span>
<span id="cb17-505"><a href="#cb17-505" aria-hidden="true" tabindex="-1"></a>             <span class="at">exog_variable =</span> x,</span>
<span id="cb17-506"><a href="#cb17-506" aria-hidden="true" tabindex="-1"></a>             <span class="at">do_difference =</span> <span class="cn">TRUE</span>))</span>
<span id="cb17-507"><a href="#cb17-507" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb17-508"><a href="#cb17-508" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-509"><a href="#cb17-509" aria-hidden="true" tabindex="-1"></a><span class="fu">## Large Credit Card Bank</span></span>
<span id="cb17-512"><a href="#cb17-512" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb17-513"><a href="#cb17-513" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-ccf-port-cc</span></span>
<span id="cb17-514"><a href="#cb17-514" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Cross-Correlation Function"</span></span>
<span id="cb17-515"><a href="#cb17-515" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-subcap:</span></span>
<span id="cb17-516"><a href="#cb17-516" aria-hidden="true" tabindex="-1"></a><span class="co">#|   - "UBPRE425: Credit Card Loans, % Gross LN&amp;LS"</span></span>
<span id="cb17-517"><a href="#cb17-517" aria-hidden="true" tabindex="-1"></a><span class="co">#|   - "UBPRE263: Unused Commitments on Credit Cards as a percent of Total Assets"</span></span>
<span id="cb17-518"><a href="#cb17-518" aria-hidden="true" tabindex="-1"></a><span class="co">#|   - "UBPR3815: Unused Commitments on Credit Cards"</span></span>
<span id="cb17-519"><a href="#cb17-519" aria-hidden="true" tabindex="-1"></a><span class="co">#|   - "UBPRB538: Loans to Individuals for Household, Family, and Other Personal Expenditures:Credit Cards"</span></span>
<span id="cb17-520"><a href="#cb17-520" aria-hidden="true" tabindex="-1"></a><span class="co">#| results: hide</span></span>
<span id="cb17-521"><a href="#cb17-521" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-keep: all</span></span>
<span id="cb17-522"><a href="#cb17-522" aria-hidden="true" tabindex="-1"></a><span class="co">#| layout-ncol: 2</span></span>
<span id="cb17-523"><a href="#cb17-523" aria-hidden="true" tabindex="-1"></a>exog_measures <span class="sc">|&gt;</span> <span class="fu">map</span>(\(x) <span class="fu">run_ccf_test</span>(<span class="at">data =</span> ubpr_data.lcbank,</span>
<span id="cb17-524"><a href="#cb17-524" aria-hidden="true" tabindex="-1"></a>             <span class="at">target_variable =</span> <span class="st">"UBPRE524"</span>,</span>
<span id="cb17-525"><a href="#cb17-525" aria-hidden="true" tabindex="-1"></a>             <span class="at">exog_variable =</span> x,</span>
<span id="cb17-526"><a href="#cb17-526" aria-hidden="true" tabindex="-1"></a>             <span class="at">do_difference =</span> <span class="cn">TRUE</span>))</span>
<span id="cb17-527"><a href="#cb17-527" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb17-528"><a href="#cb17-528" aria-hidden="true" tabindex="-1"></a>:::</span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>